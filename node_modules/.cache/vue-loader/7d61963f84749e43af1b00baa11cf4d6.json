{"remainingRequest":"D:\\beeko\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\beeko\\src\\components\\wallet.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\beeko\\src\\components\\wallet.vue","mtime":1578756101751},{"path":"D:\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1567240333000},{"path":"D:\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgbmFtZTogJ1dhbGxldCcsCiAgIGRhdGE6ICgpID0+ICh7CiAgICAgZGlhbG9nOiBmYWxzZSwKICAgICBxckdlbjoxLAogICAgIHRva2VuczowLAogICAgIGJvbnVzOjAsCiAgICAgdHJhbnNmZXJyZWQ6MCwKICAgICBnZW5lcmF0ZWRUb2tlbnM6ZmFsc2UsCiAgICAgdHJhbnNmZXJUb2tlbnM6JycKICAgfSksCiAgIGFzeW5jIG1vdW50ZWQoKXsKICAgIC8vY2hlY2sgZm9yIG1lc3NhZ2UgCiAgICBpZih0eXBlb2YodGhpcy4kcm91dGUucGFyYW1zLnRyYW5zZmVycmVkKSAhPSAndW5kZWZpbmVkJyl7CiAgICAgIHRoaXMudHJhbnNmZXJyZWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMudHJhbnNmZXJyZWQ7CiAgICB9CiAgICBsZXQgZ2V0VG9rZW5zID0gMDsKICAgIGxldCBnZXRCb251c2VzID0gMDsKICAgICAgICAKICAgIC8vQ09VTlQgV0FMTEVUIFRPS0VOUyAKICAgIHRoaXMudG9rZW5zID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlci50b2tlbnM7CiAgICBjb25zb2xlLmxvZygndG9rZW5zJyk7CiAgICBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnRva2Vucyk7CiAgICBpZih0eXBlb2YodGhpcy4kcm91dGUucGFyYW1zLmJvbnVzKSAhPSAndW5kZWZpbmVkJyB8fCB0eXBlb2YodGhpcy4kcm91dGUucGFyYW1zLnRyYW5zZmVycmVkKSAhPSAndW5kZWZpbmVkJyl7CiAgICAgIGxldCB0cmFuc2FjdGlvbnMgPSBhd2FpdCB0aGlzLiRzdG9yZS5zdGF0ZS5kYi5jb2xsZWN0aW9uKCd0cmFuc2FjdGlvbnMnKS53aGVyZSgndWlkJywgJz09JywgdGhpcy4kZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZCkuZ2V0KCk7CiAgICAgIHRyYW5zYWN0aW9ucy5mb3JFYWNoKGFzeW5jICh0aCkgPT57CiAgICAgICAgICBnZXRUb2tlbnMgPSBnZXRUb2tlbnMrcGFyc2VJbnQodGguZGF0YSgpLnRva2Vucyk7IAogICAgICAgICAgaWYodHlwZW9mKHRoLmRhdGEoKS5ib251cykhPSd1bmRlZmluZWQnKXsKICAgICAgICAgICAgZ2V0Qm9udXNlcyA9IGdldEJvbnVzZXMrcGFyc2VJbnQodGguZGF0YSgpLmJvbnVzKTsKICAgICAgICAgIH0KICAgICAgfSk7CiAgICAgIGxldCB0cmFuc2ZlcnMgPSBhd2FpdCB0aGlzLiRzdG9yZS5zdGF0ZS5kYi5jb2xsZWN0aW9uKCd0cmFuc2FjdGlvbnMnKS53aGVyZSgnZnJvbWlkJywgJz09JywgdGhpcy4kZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZCkuZ2V0KCk7CiAgICAgIGxldCByZWYgPSB0aGlzOwogICAgICB0cmFuc2ZlcnMuZm9yRWFjaChhc3luYyAodGgpID0+ewogICAgICAgICAgZ2V0VG9rZW5zID0gZ2V0VG9rZW5zLXBhcnNlSW50KHRoLmRhdGEoKS50b2tlbnMpOwogICAgICAgICAgcmVmLiRzdG9yZS5zdGF0ZS5kYi5jb2xsZWN0aW9uKCd1c2VycycpLmRvYyh0aGlzLiRmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudWlkKS51cGRhdGUoeydib251cyc6Z2V0Qm9udXNlcywgJ3Rva2Vucyc6Z2V0VG9rZW5zfSk7CiAgICAgICAgICBjb25zb2xlLmxvZygnYWRkZWQgdG9rZW5zJyk7CiAgICAgIH0pOwogICAgICB0aGlzLnRva2VucyA9IGdldFRva2VuczsKICAgIH0KICAgfSwKICAgd2F0Y2g6IHsKICAgIGRpYWxvZyh2YWwpIHsKICAgICAgICBpZighdmFsKXsKICAgICAgICAgIHRoaXMuZ2VuZXJhdGVkVG9rZW5zID0gdmFsOyAgCiAgICAgICAgICB0aGlzLnRyYW5zZmVyVG9rZW5zID0gJyc7CiAgICAgICAgfQogICAgICB9LAogIH0sCiAgIG1ldGhvZHM6IHsKICAgICBxckdlbmVyYXRlKHRyYW5zZmVyVG9rZW5zKXsKICAgICAgICBpZih0cmFuc2ZlclRva2Vucyl7CiAgICAgICAgICB0aGlzLmdlbmVyYXRlZFRva2VucyA9IHRydWU7CiAgICAgICAgICBsZXQgcXIgPSB0aGlzLiRxcmNvZGUoMCwgJ0gnKTsgCiAgICAgICAgICBsZXQgdHJhbnNmZXIgPSB7ZnJvbWlkOjEsIHRva2Vuczp0cmFuc2ZlclRva2VucywgIHRpbWU6RGF0ZS4gbm93KCl9OwogICAgICAgICAgdHJhbnNmZXIgPSBKU09OLnN0cmluZ2lmeSh0cmFuc2Zlcik7CiAgICAgICAgICBxci5hZGREYXRhKHRyYW5zZmVyKTsKICAgICAgICAgIHFyLm1ha2UoKTsKICAgICAgICAgIHNldFRpbWVvdXQoCiAgICAgICAgICAgIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3FySG9sZGVyJykuaW5uZXJIVE1MID0gcXIuY3JlYXRlSW1nVGFnKDQpOwogICAgICAgICAgICB9LCA1MDAKICAgICAgICAgICk7CiAgICAgICAgfSAKICAgICB9CiAgIH0KICB9Cg=="},{"version":3,"sources":["wallet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"wallet.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container style=\"height:500px\">\n    <v-layout\n      text-center\n      wrap\n    >\n      <v-flex>\n        <div class=\"text-center\" v-if=\"transferred\">\n          <v-alert color=\"orange lighten-2\" height=\"40\" style=\"padding-top:7px\"><v-icon>mdi-coins</v-icon>Зараховано зелених: {{transferred}}</v-alert>\n        </div>\n\n        <h1 class=\"headline\" style=\"color:orange\">\n          Мій гаманець\n        </h1>\n        <div>\n        <v-chip text-color=\"#07C01A\" color=\"transparent\" style=\"margin-top:10px\">\n            <v-icon color=\"#07C01A\" large>mdi-coin-outline</v-icon>\n              <span class=\"display-1\">{{$store.state.user.tokens}}</span>\n          </v-chip>\n        </div>  \n        <br/>\n        <div id=\"placeHolder\"></div>\n        <v-btn dark color=\"green\" @click=\"dialog = true\">Переказати <v-icon>mdi-coin-outline</v-icon></v-btn>\n        \n        <v-dialog v-model=\"dialog\" @close=\"alert(1)\" color=\"#fff\"> \n          <v-card>\n            <v-card-title v-if=\"!generatedTokens\">Введіть суму токенів</v-card-title>\n            <v-card-text v-if=\"!generatedTokens\">\n              <v-text-field\n                id=\"transferTokens\"\n                label=\"Введіть суму\"\n                solo\n                outlined\n                height=\"20\"\n                v-model=\"transferTokens\"\n              ></v-text-field>\n              <v-btn text color=\"green\" :disabled=\"!transferTokens\" outlined @click=\"qrGenerate(transferTokens)\">Створити <v-icon>mdi-qrcode-scan</v-icon></v-btn><br/>\n             </v-card-text>\n\n            <div id=\"qrHolderOuter\" v-show=\"generatedTokens\">\n              <div class=\"text-center\" >\n                <v-alert color=\"green lighten-2\" height=\"40\" style=\"padding-top:7px\">Покажіть QR-код отримувачу</v-alert>\n              </div>\n              <div id=\"qrHolder\"></div>\n            </div>  \n           </v-card> \n        </v-dialog>  \n        <br/><br/>\n        <v-card>\n          <v-tabs\n            background-color=\"white\"\n            centered\n            color=\"#07C01A\"\n          >\n            <v-tab><v-icon>mdi-coin-outline</v-icon>Пропозиції</v-tab>\n            <v-tab><v-icon>mdi-star-face</v-icon>Подарунки</v-tab>\n            <v-tab-item>\n                <v-banner one-line>\n                <v-avatar\n                  slot=\"icon\"\n                  size=\"40\"\n                >\n                  <v-icon\n                    icon=\"mdi-coffee\"\n                    color=\"#8b6138\"\n                  >\n                    mdi-coffee\n                  </v-icon>\n                </v-avatar>\n                <div class=\"headline text-left\">Кава</div>\n                <p>100% Арабіка,250 мл</p>\n                <template v-slot:actions>\n                  <v-chip text-color=\"orange\" color=\"transparent\">\n                   <v-icon color=\"#07C01A\">mdi-coin-outline</v-icon>\n                      100\n                  </v-chip> \n                  <v-btn text color=\"green accent-4\">незабаром</v-btn>\n                </template>\n              </v-banner>\n\n              <v-banner one-line>\n                <v-avatar\n                  slot=\"icon\"\n                  color=\"ref\"\n                  size=\"40\"\n                >\n                  <v-icon\n                    icon=\"mdi-ticket\"\n                    color=\"green\"\n                    size=\"40\"\n                  >\n                    mdi-cellphone\n                  </v-icon>\n                </v-avatar>\n                <div class=\"headline text-left\">Поповнення</div>\n                <p>Екотариф. 45 грн</p>\n                <template v-slot:actions>\n                  <v-chip text-color=\"orange\" color=\"transparent\">\n                   <v-icon color=\"#07C01A\">mdi-coin-outline</v-icon>\n                      50\n                  </v-chip> \n                  <v-btn text color=\"green accent-4\">незабаром</v-btn>\n                </template>\n              </v-banner>\n\n            </v-tab-item> \n            <v-tab-item>\n              <div class=\"text-center\">\n                <v-alert border=\"bottom\"\n                  colored-border\n                  type=\"warning\"\n                  elevation=\"2\">\n                Кількість бонусних подарунків обмежена</v-alert>\n              </div>\n               <v-banner one-line>\n                <v-avatar\n                  slot=\"icon\"\n                  color=\"green\"\n                  size=\"40\"\n                >\n                  <v-icon\n                    icon=\"mdi-ticket\"\n                    color=\"white\"\n                  >\n                    mdi-ticket\n                  </v-icon>\n                </v-avatar>\n                <div class=\"headline text-left\">Квиток на концерт</div>\n                <p>Альона, Альона</p>\n                <template v-slot:actions>\n                  <v-chip text-color=\"orange\" color=\"transparent\">\n                   <v-icon color=\"orange\">mdi-star-face</v-icon>\n                      200\n                  </v-chip> \n                  <v-btn text color=\"green accent-4\">незабаром</v-btn>\n                </template>\n              </v-banner>\n            </v-tab-item> \n          </v-tabs> \n        </v-card>\n\n<!--\n         <v-card\n            color=\"#698ea1\"\n            dark\n          >\n            <v-card-title class=\"headline\">Мої транзакції</v-card-title>\n\n            <v-card-subtitle>Усі відсортовані пляшки</v-card-subtitle>\n            <v-list>\n            <v-subheader>01-21.11.2019</v-subheader>\n              <v-list-item-group color=\"transparent\">\n                <v-list-item> <v-icon>mdi-coins</v-icon>100</v-list-item>\n                <v-list-item> <v-icon>mdi-coins</v-icon>100</v-list-item>\n                <v-list-item> <v-icon>mdi-coins</v-icon>100</v-list-item>\n              </v-list-item-group>\n            </v-list>\n            <v-card-actions>\n              <v-btn text>Переглянути</v-btn>\n            </v-card-actions>\n          </v-card>-->\n          \n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\nexport default {\n   name: 'Wallet',\n   data: () => ({\n     dialog: false,\n     qrGen:1,\n     tokens:0,\n     bonus:0,\n     transferred:0,\n     generatedTokens:false,\n     transferTokens:''\n   }),\n   async mounted(){\n    //check for message \n    if(typeof(this.$route.params.transferred) != 'undefined'){\n      this.transferred = this.$route.params.transferred;\n    }\n    let getTokens = 0;\n    let getBonuses = 0;\n        \n    //COUNT WALLET TOKENS \n    this.tokens = this.$store.state.user.tokens;\n    console.log('tokens');\n    console.log(this.$store.state.user.tokens);\n    if(typeof(this.$route.params.bonus) != 'undefined' || typeof(this.$route.params.transferred) != 'undefined'){\n      let transactions = await this.$store.state.db.collection('transactions').where('uid', '==', this.$firebase.auth().currentUser.uid).get();\n      transactions.forEach(async (th) =>{\n          getTokens = getTokens+parseInt(th.data().tokens); \n          if(typeof(th.data().bonus)!='undefined'){\n            getBonuses = getBonuses+parseInt(th.data().bonus);\n          }\n      });\n      let transfers = await this.$store.state.db.collection('transactions').where('fromid', '==', this.$firebase.auth().currentUser.uid).get();\n      let ref = this;\n      transfers.forEach(async (th) =>{\n          getTokens = getTokens-parseInt(th.data().tokens);\n          ref.$store.state.db.collection('users').doc(this.$firebase.auth().currentUser.uid).update({'bonus':getBonuses, 'tokens':getTokens});\n          console.log('added tokens');\n      });\n      this.tokens = getTokens;\n    }\n   },\n   watch: {\n    dialog(val) {\n        if(!val){\n          this.generatedTokens = val;  \n          this.transferTokens = '';\n        }\n      },\n  },\n   methods: {\n     qrGenerate(transferTokens){\n        if(transferTokens){\n          this.generatedTokens = true;\n          let qr = this.$qrcode(0, 'H'); \n          let transfer = {fromid:1, tokens:transferTokens,  time:Date. now()};\n          transfer = JSON.stringify(transfer);\n          qr.addData(transfer);\n          qr.make();\n          setTimeout(\n            function(){\n              document.getElementById('qrHolder').innerHTML = qr.createImgTag(4);\n            }, 500\n          );\n        } \n     }\n   }\n  }\n</script>\n"]}]}