{"remainingRequest":"D:\\beeko\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\beeko\\src\\components\\signup.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\beeko\\src\\components\\signup.vue","mtime":1578754739918},{"path":"D:\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1567240333000},{"path":"D:\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdzaWdudXAnLA0KICBkYXRhOiAoKSA9PiAoew0KICAgIHJlY2FwdGNoYVZlcmlmaWVyOicnLA0KICAgIGNvbmZpcm1hdGlvblJlc3VsdDonJywNCiAgICBjb2RlUmVzdWx0OicnLA0KICAgIHZlcmlmaWVkOmZhbHNlLA0KICAgIGxvZ291dDpmYWxzZSwNCiAgICBwaG9uZVJ1bGVzOiBbDQogICAgICAgIHYgPT4gISF2IHx8ICfQntCx0L7QsmDRj9C30LrQvtCy0LUg0L/QvtC70LUnDQogICAgXSwNCiAgICBzbXNSdWxlczogWw0KICAgICAgICB2ID0+ICEhdiB8fCAn0J7QsdC+0LJg0Y/Qt9C60L7QstC1INC/0L7Qu9C1Jw0KICAgIF0sDQogICAgYWN0aXZlVGFiOidyZWdpc3RlcicNCiAgfSksDQogIG1vdW50ZWQoKXsNCiAgICBpZih0eXBlb2YodGhpcy4kcm91dGUucGFyYW1zLmxvZ291dCkgIT0gJ3VuZGVmaW5lZCcpew0KICAgICAgdGhpcy5hY3RpdmVUYWIgPSAnbG9naW4nOw0KICAgICAgdGhpcy5sb2dvdXQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMubG9nb3V0Ow0KICAgIH0NCiAgICB0aGlzLnJlQ2FwdGNoYSgpOw0KICAgIC8vY2hlY2sgaWYgc2lnbmVkIHVwIGZvciBhdmF0YXINCiAgICAvL2FkZCBhdmF0YXIgb3IgZGlzbWlzcyANCiAgfSwNCiAgbWV0aG9kczp7DQogICAgcmVDYXB0Y2hhKCl7DQogICAgICAgdGhpcy5yZWNhcHRjaGFWZXJpZmllciA9IG5ldyB0aGlzLiRmaXJlYmFzZS5hdXRoLlJlY2FwdGNoYVZlcmlmaWVyKCdyZWNhcHRjaGEtY29udGFpbmVyJyk7DQogICAgICAgdGhpcy5yZWNhcHRjaGFWZXJpZmllci5yZW5kZXIoKTsNCiAgICAgfSwNCiAgICAgY29kZXZlcmlmeSgpew0KICAgICAgIHZhciBmaXJlYmFzZUF1dGggPSB0aGlzLiRmaXJlYmFzZTsgIA0KICAgICAgIHZhciB2ZXJpZmljYXRpb25JZCA9IHRoaXMuY29kZVJlc3VsdC52ZXJpZmljYXRpb25JZDsNCiAgICAgICB2YXIgY29kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2ZXJpZmljYXRpb25Db2RlJykudmFsdWU7DQogICAgICAgdmFyIHJlZGlyZWN0ID0gdGhpcy4kcm91dGVyOw0KICAgICAgIGNvbnNvbGUubG9nKCdjb2RlUmVzdWx0Jyk7DQogICAgICAgY29uc29sZS5sb2codGhpcy5jb2RlUmVzdWx0KTsNCiAgICAgICBsZXQgc3RvcmUgPSB0aGlzLiRzdG9yZTsNCiAgICAgICB0aGlzLmNvZGVSZXN1bHQuY29uZmlybShjb2RlKS50aGVuKA0KICAgICAgICAgZnVuY3Rpb24oKXsNCiAgICAgICAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoZXJlIHNpZ25lZCB1cCcpOw0KICAgICAgICAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpcmViYXNlQXV0aC5hdXRoKCkuY3VycmVudFVzZXIudWlkKTsNCiAgICAgICAgICAgIHZhciBjcmVkZW50aWFsID0gZmlyZWJhc2VBdXRoLmF1dGguUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgY29kZSk7DQogICAgICAgICAgICBmaXJlYmFzZUF1dGguYXV0aCgpLnNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpOw0KICAgICAgICAgICAgc3RvcmUuc3RhdGUuZGIuY29sbGVjdGlvbigidXNlcnMiKS5kb2MoZmlyZWJhc2VBdXRoLmF1dGgoKS5jdXJyZW50VXNlci51aWQpLnVwZGF0ZSh7J3Bob25lJzpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbnVtYmVyJykudmFsdWV9KQ0KICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgLy9yZWRpcmVjdCB0byBhY2NvdW50DQogICAgICAgICAgICAgICAgcmVkaXJlY3QucHVzaCh7cGF0aDoncHJvZmlsZScsIG5hbWU6J1Byb2ZpbGUnLCBwYXJhbXM6e3NpZ25lZHVwOjF9fSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7DQogICAgICAgICAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUNCiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZlcmlmaWNhdGlvbkNvZGUnKS52YWx1ZSA9ICcnOw0KICAgICAgICAgICAgICBhbGVydCgn0J3QtdCy0ZbRgNC90LjQuSDQutC+0LQnKTsNCiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgYWRkaW5nIGRvY3VtZW50OiAiLCBlcnJvcik7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgIH0NCiAgICAgICApLmNhdGNoKA0KICAgICAgICAgZnVuY3Rpb24oZXJyb3Ipew0KICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTsNCiAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZlcmlmaWNhdGlvbkNvZGUnKS52YWx1ZSA9ICcnOw0KICAgICAgICAgICBhbGVydCgn0J3QtdCy0ZbRgNC90LjQuSDQutC+0LQnKTsNCiAgICAgICAgIH0NCiAgICAgICApOw0KICAgICB9LA0KICAgICBwaG9uZUF1dGgoKXsNCiAgICAgICB2YXIgbnVtYmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ251bWJlcicpLnZhbHVlOw0KICAgICAgIGlmKG51bWJlcil7DQogICAgICAgICAgdGhpcy4kZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhQaG9uZU51bWJlcihudW1iZXIsdGhpcy5yZWNhcHRjaGFWZXJpZmllcikudGhlbigNCiAgICAgICAgICAgIGNvbmZpcm1SZXN1bHQgPT57Y29uc29sZS5sb2coY29uZmlybVJlc3VsdCk7IHRoaXMuY29kZVJlc3VsdCA9IGNvbmZpcm1SZXN1bHQ7IA0KICAgICAgICAgICAgdGhpcy52ZXJpZmllZCA9IHRydWU7DQogICAgICAgICAgICBzZXRUaW1lb3V0KA0KICAgICAgICAgICAgICBmdW5jdGlvbigpew0KICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmVyaWZpY2F0aW9uQ29kZSIpLnZhbHVlPScnOw0KICAgICAgICAgICAgICB9LDUwMA0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICApLmNhdGNoKA0KICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3Ipew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICApOw0KICAgICAgIH0NCiAgICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["signup.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"signup.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-container>\r\n    <v-layout text-center wrap>\r\n      <v-flex xs12>\r\n         <template>\r\n           <v-tabs color=\"orange\" centered=\"\" v-model=\"activeTab\">\r\n            <v-tab :href=\"`#register`\">Реєстрація</v-tab>\r\n            <v-tab :href=\"`#login`\">Логін</v-tab>\r\n           </v-tabs>\r\n           <br/>\r\n           <div class=\"text-center\" v-if=\"logout\">\r\n            <v-alert color=\"orange lighten-2\" height=\"40\" style=\"padding-top:7px\">Ви вийшли з акаунту</v-alert>\r\n          </div>\r\n           <div v-show=\"!verified\">\r\n              <v-text-field outlined id=\"number\" label=\"Введіть номер мобільного\" :rules=\"phoneRules\"></v-text-field>\r\n              <div id=\"recaptcha-container\"></div>\r\n              <v-btn @click=\"phoneAuth\">відправити SMS</v-btn>\r\n           </div>\r\n           <div v-show=\"verified\">\r\n              <v-text-field outlined id=\"verificationCode\" label=\"Введіть SMS-код\" :rules=\"smsRules\"></v-text-field>\r\n              <v-btn @click=\"codeverify\">Підтвердити SMS-код</v-btn>\r\n              <v-btn @click=\"phoneAuth\" text>Надіслати SMS ще раз</v-btn>\r\n           </div>\r\n          </template>\r\n      </v-flex>\r\n      </v-layout>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'signup',\r\n  data: () => ({\r\n    recaptchaVerifier:'',\r\n    confirmationResult:'',\r\n    codeResult:'',\r\n    verified:false,\r\n    logout:false,\r\n    phoneRules: [\r\n        v => !!v || 'Обов`язкове поле'\r\n    ],\r\n    smsRules: [\r\n        v => !!v || 'Обов`язкове поле'\r\n    ],\r\n    activeTab:'register'\r\n  }),\r\n  mounted(){\r\n    if(typeof(this.$route.params.logout) != 'undefined'){\r\n      this.activeTab = 'login';\r\n      this.logout = this.$route.params.logout;\r\n    }\r\n    this.reCaptcha();\r\n    //check if signed up for avatar\r\n    //add avatar or dismiss \r\n  },\r\n  methods:{\r\n    reCaptcha(){\r\n       this.recaptchaVerifier = new this.$firebase.auth.RecaptchaVerifier('recaptcha-container');\r\n       this.recaptchaVerifier.render();\r\n     },\r\n     codeverify(){\r\n       var firebaseAuth = this.$firebase;  \r\n       var verificationId = this.codeResult.verificationId;\r\n       var code = document.getElementById('verificationCode').value;\r\n       var redirect = this.$router;\r\n       console.log('codeResult');\r\n       console.log(this.codeResult);\r\n       let store = this.$store;\r\n       this.codeResult.confirm(code).then(\r\n         function(){\r\n            //eslint-disable-next-line no-console\r\n            console.log('here signed up');\r\n             //eslint-disable-next-line no-console\r\n            console.log(firebaseAuth.auth().currentUser.uid);\r\n            var credential = firebaseAuth.auth.PhoneAuthProvider.credential(verificationId, code);\r\n            firebaseAuth.auth().signInWithCredential(credential);\r\n            store.state.db.collection(\"users\").doc(firebaseAuth.auth().currentUser.uid).update({'phone':document.getElementById('number').value})\r\n            .then(function() {\r\n                //redirect to account\r\n                redirect.push({path:'profile', name:'Profile', params:{signedup:1}});\r\n            })\r\n            .catch(function(error) {\r\n              //eslint-disable-next-line no-console\r\n              document.getElementById('verificationCode').value = '';\r\n              alert('Невірний код');\r\n              console.error(\"Error adding document: \", error);\r\n            });\r\n         }\r\n       ).catch(\r\n         function(error){\r\n           console.log(error.message);\r\n           document.getElementById('verificationCode').value = '';\r\n           alert('Невірний код');\r\n         }\r\n       );\r\n     },\r\n     phoneAuth(){\r\n       var number = document.getElementById('number').value;\r\n       if(number){\r\n          this.$firebase.auth().signInWithPhoneNumber(number,this.recaptchaVerifier).then(\r\n            confirmResult =>{console.log(confirmResult); this.codeResult = confirmResult; \r\n            this.verified = true;\r\n            setTimeout(\r\n              function(){\r\n              document.getElementById(\"verificationCode\").value='';\r\n              },500\r\n            );\r\n            }\r\n          ).catch(\r\n            function(error){\r\n              console.log(error.message);\r\n            }\r\n          );\r\n       }\r\n     }\r\n  }\r\n};\r\n</script>\r\n"]}]}