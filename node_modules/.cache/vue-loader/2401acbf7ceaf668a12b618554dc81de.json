{"remainingRequest":"D:\\beeko\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\beeko\\src\\components\\qr.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\beeko\\src\\components\\qr.vue","mtime":1578574026159},{"path":"D:\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1567240333000},{"path":"D:\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiAoewogICAgcXJzZWVuOmZhbHNlCiAgfSksCiAgbW91bnRlZCAoKXsKICAgIC8qdmFyIHFyID0gdGhpcy4kcXJjb2RlKDAsICdIJyk7CiAgICB2YXIgdHJhbnNhY3Rpb24gPSB7YmluaWQ6MSwgY291bnQ6MSwgIHRpbWU6RGF0ZS4gbm93KCl9OwogICAgdmFyIHRyYW5zZmVyID0ge2Zyb21pZDoxLCB0b2tlbnM6MSwgIHRpbWU6RGF0ZS4gbm93KCl9OwogICAgdHJhbnNhY3Rpb24gPSBKU09OLnN0cmluZ2lmeSh0cmFuc2FjdGlvbik7CiAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICBjb25zb2xlLmxvZyh0cmFuc2FjdGlvbik7CiAgICBxci5hZGREYXRhKHRoaXMuJGVuY3J5cHRvci5lbmNyeXB0KEpTT04uc3RyaW5naWZ5KHRyYW5zYWN0aW9uKSkpOwogICAgcXIubWFrZSgpOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYWNlSG9sZGVyJykuaW5uZXJIVE1MID0gcXIuY3JlYXRlSW1nVGFnKCk7Ki8KICB9LAogIG1ldGhvZHM6IHsKICAgICBJc0pzb25TdHJpbmcoc3RyKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9LAogICAgb25EZWNvZGUgKGRlY29kZWRTdHJpbmcpIHsKICAgICAgaWYoZGVjb2RlZFN0cmluZyl7CiAgICAgICAgLy90aGlzLiRyb3V0ZXIucHVzaCgnV2FsbGV0JykKICAgICAgICAvL3ZhciBkZWNyeXB0ZWQgPSB0aGlzLiRlbmNyeXB0b3IuZGVjcnlwdChkZWNvZGVkU3RyaW5nKTsKICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgIGRlY29kZWRTdHJpbmcgPSB0aGlzLklzSnNvblN0cmluZyhkZWNvZGVkU3RyaW5nKTsKICAgICAgICBsZXQgcm91dGVyID0gdGhpcy4kcm91dGVyOwogICAgICAgIGlmKHR5cGVvZiBkZWNvZGVkU3RyaW5nID09PSAnb2JqZWN0Jyl7CiAgICAgICAgICAvL1RSQU5TRkVSCiAgICAgICAgICBpZih0eXBlb2YgZGVjb2RlZFN0cmluZy50b2tlbnMgIT09ICd1bmRlZmluZWQnKXsKICAgICAgICAgICAgYWxlcnQoJ0dldCB5b3VyICcrZGVjb2RlZFN0cmluZy50b2tlbnMrJyB0b2tlbnMgZnJvbSAnK2RlY29kZWRTdHJpbmcuZnJvbWlkKycgIScpOwogICAgICAgICAgICAvL2FkZCBvd25lciBvZiB0cmFuc2FjdGlvbgogICAgICAgICAgICBkZWNvZGVkU3RyaW5nLnVpZCA9IHRoaXMuJGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51aWQ7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmRiLmNvbGxlY3Rpb24oInRyYW5zYWN0aW9ucyIpLmFkZChkZWNvZGVkU3RyaW5nKQogICAgICAgICAgICAudGhlbihmdW5jdGlvbihkb2NSZWYpIHsKICAgICAgICAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkRvY3VtZW50IHdyaXR0ZW4gd2l0aCBJRDogIiwgZG9jUmVmLmlkKTsKICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHtwYXRoOid3YWxsZXQnLCBuYW1lOidXYWxsZXQnLCBwYXJhbXM6eyd0cmFuc2ZlcnJlZCc6ZGVjb2RlZFN0cmluZy50b2tlbnN9fSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGFkZGluZyBkb2N1bWVudDogIiwgZXJyb3IpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAvL1JFQ1lDTEUgdHJhbnNhY3Rpb24gCiAgICAgICAgICB9IGVsc2UgaWYodHlwZW9mIGRlY29kZWRTdHJpbmcuY291bnQgIT09J3VuZGVmaW5lZCcpewogICAgICAgICAgICBsZXQgcmVjeWNsZVRpbWUgPSBuZXcgRGF0ZShkZWNvZGVkU3RyaW5nLnRpbWUpOwogICAgICAgICAgICBhbGVydCgnVGhhbmtzIGZvciAnK2RlY29kZWRTdHJpbmcuY291bnQrJyAnK3JlY3ljbGVUaW1lLmdldERhdGUoKSsnICcrKHJlY3ljbGVUaW1lLmdldE1vbnRoKCkrMSkrJyAnK3JlY3ljbGVUaW1lLmdldEZ1bGxZZWFyKCkpOwogICAgICAgICAgICAvL2FkZCBvd25lciBvZiB0cmFuc2FjdGlvbgogICAgICAgICAgICBkZWNvZGVkU3RyaW5nLnVpZCA9IHRoaXMuJGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51aWQ7CiAgICAgICAgICAgIC8vY2FsYyByYXRlcwogICAgICAgICAgICBkZWNvZGVkU3RyaW5nLnRva2VucyA9IHRoaXMuJHJhdGUqZGVjb2RlZFN0cmluZy5jb3VudDsKICAgICAgICAgICAgZGVjb2RlZFN0cmluZy5yYXRlID0gdGhpcy4kcmF0ZTsKICAgICAgICAgICAgLy9jYWxjIGJvbnVzZXMKICAgICAgICAgICAgZGVjb2RlZFN0cmluZy5ib251cyA9IHRoaXMuJGJvbnVzUmF0ZSpkZWNvZGVkU3RyaW5nLmNvdW50OwogICAgICAgICAgICBkZWNvZGVkU3RyaW5nLmJvbnVzUmF0ZSA9IHRoaXMuJGJvbnVzUmF0ZTsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZGIuY29sbGVjdGlvbigidHJhbnNhY3Rpb25zIikuYWRkKGRlY29kZWRTdHJpbmcpCiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvY1JlZikgewogICAgICAgICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRG9jdW1lbnQgd3JpdHRlbiB3aXRoIElEOiAiLCBkb2NSZWYuaWQpOwogICAgICAgICAgICAgICAgcm91dGVyLnB1c2goe3BhdGg6J3dhbGxldCcsIG5hbWU6J1dhbGxldCcsIHBhcmFtczp7J3RyYW5zZmVycmVkJzpkZWNvZGVkU3RyaW5nLnRva2VucywgJ2JvbnVzJzpkZWNvZGVkU3RyaW5nLmJvbnVzfX0pOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBhZGRpbmcgZG9jdW1lbnQ6ICIsIGVycm9yKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGVydCgnUVIgZXJyb3InKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQoJ1FSIGVycm9yJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["qr.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"qr.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container>\n    <v-layout\n      text-center\n      wrap\n    >\n      <v-flex xs12>\n        <v-img\n          :src=\"require('../assets/logo.png')\"\n          class=\"my-3\"\n          contain\n          height=\"60\"\n        ></v-img>\n      </v-flex>\n\n      <v-flex mb-4>\n        <div v-if=\"qrseen\">\n          <v-alert color=\"orange lighten-2\" style=\"padding-top:7px\"><v-icon>mdi-qrcode-scan</v-icon>Наведіть на екран на контейнері для автоматичного сканування</v-alert>\n          <qrcode-stream @decode=\"onDecode\" height=\"100\"></qrcode-stream>\n        </div>\n        <v-btn v-if=\"!qrseen\" v-on:click=\"qrseen = !qrseen\" x-large color=\"success\" dark>Сканувати QR-код</v-btn>\n        </v-flex>\n     </v-layout>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  data: () => ({\n    qrseen:false\n  }),\n  mounted (){\n    /*var qr = this.$qrcode(0, 'H');\n    var transaction = {binid:1, count:1,  time:Date. now()};\n    var transfer = {fromid:1, tokens:1,  time:Date. now()};\n    transaction = JSON.stringify(transaction);\n    //eslint-disable-next-line no-console\n    console.log(transaction);\n    qr.addData(this.$encryptor.encrypt(JSON.stringify(transaction)));\n    qr.make();\n    document.getElementById('placeHolder').innerHTML = qr.createImgTag();*/\n  },\n  methods: {\n     IsJsonString(str) {\n        try {\n            return JSON.parse(str);\n        } catch (e) {\n            return false;\n        }\n    },\n    onDecode (decodedString) {\n      if(decodedString){\n        //this.$router.push('Wallet')\n        //var decrypted = this.$encryptor.decrypt(decodedString);\n        //eslint-disable-next-line\n        decodedString = this.IsJsonString(decodedString);\n        let router = this.$router;\n        if(typeof decodedString === 'object'){\n          //TRANSFER\n          if(typeof decodedString.tokens !== 'undefined'){\n            alert('Get your '+decodedString.tokens+' tokens from '+decodedString.fromid+' !');\n            //add owner of transaction\n            decodedString.uid = this.$firebase.auth().currentUser.uid;\n            this.$store.state.db.collection(\"transactions\").add(decodedString)\n            .then(function(docRef) {\n               //eslint-disable-next-line no-console\n                console.log(\"Document written with ID: \", docRef.id);\n                router.push({path:'wallet', name:'Wallet', params:{'transferred':decodedString.tokens}});\n            })\n            .catch(function(error) {\n              //eslint-disable-next-line no-console\n                console.error(\"Error adding document: \", error);\n            });\n           //RECYCLE transaction \n          } else if(typeof decodedString.count !=='undefined'){\n            let recycleTime = new Date(decodedString.time);\n            alert('Thanks for '+decodedString.count+' '+recycleTime.getDate()+' '+(recycleTime.getMonth()+1)+' '+recycleTime.getFullYear());\n            //add owner of transaction\n            decodedString.uid = this.$firebase.auth().currentUser.uid;\n            //calc rates\n            decodedString.tokens = this.$rate*decodedString.count;\n            decodedString.rate = this.$rate;\n            //calc bonuses\n            decodedString.bonus = this.$bonusRate*decodedString.count;\n            decodedString.bonusRate = this.$bonusRate;\n            this.$store.state.db.collection(\"transactions\").add(decodedString)\n            .then(function(docRef) {\n               //eslint-disable-next-line no-console\n                console.log(\"Document written with ID: \", docRef.id);\n                router.push({path:'wallet', name:'Wallet', params:{'transferred':decodedString.tokens, 'bonus':decodedString.bonus}});\n            })\n            .catch(function(error) {\n              //eslint-disable-next-line no-console\n                console.error(\"Error adding document: \", error);\n            });\n          } else {\n            alert('QR error');\n          }\n        } else {\n          alert('QR error');\n        }\n      }\n    }\n  }\n};\n</script>\n"]}]}