{"remainingRequest":"C:\\APPS\\beeko\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\APPS\\beeko\\src\\components\\qr.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\APPS\\beeko\\src\\components\\qr.vue","mtime":1605567436791},{"path":"C:\\APPS\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\APPS\\beeko\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\APPS\\beeko\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1567240334000},{"path":"C:\\APPS\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\APPS\\beeko\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogKCkgPT4gKHsKICAgIHFyc2VlbjpmYWxzZQogIH0pLAogIG1vdW50ZWQgKCl7CiAgICAKICAgIC8qdmFyIHFyID0gdGhpcy4kcXJjb2RlKDAsICdIJyk7CiAgICB2YXIgdHJhbnNhY3Rpb24gPSB7YmluaWQ6MSwgY291bnQ6MSwgIHRpbWU6RGF0ZS4gbm93KCl9OwogICAgLy92YXIgdHJhbnNmZXIgPSB7ZnJvbWlkOjEsIHRva2VuczoxLCAgdGltZTpEYXRlLiBub3coKX07CiAgICB0cmFuc2FjdGlvbiA9IEpTT04uc3RyaW5naWZ5KHRyYW5zYWN0aW9uKTsKICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgIGNvbnNvbGUubG9nKHRyYW5zYWN0aW9uKTsKICAgIHFyLmFkZERhdGEodGhpcy4kZW5jcnlwdG9yLmVuY3J5cHQoSlNPTi5zdHJpbmdpZnkodHJhbnNhY3Rpb24pKSk7CiAgICBxci5tYWtlKCk7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxhY2VIb2xkZXInKS5pbm5lckhUTUwgPSBxci5jcmVhdGVJbWdUYWcoKTsqLwogICAKICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VyZWFkeScsICgpID0+IHsKICAgICAgYWxlcnQodGhpcy4kdnVlY29yZG92YS5wbHVnaW5zLnBlcm1pc3Npb25zKTsKICAgICAgY29uc29sZS5sb2coJ0NvcmRvdmEgOiBkZXZpY2UgaXMgcmVhZHkgIScpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAgIC8vY2FtZXJhIFFSIGluaXQKICAgICAgYXN5bmMgb25Jbml0IChwcm9taXNlKSB7CiAgICAgIC8vIHNob3cgbG9hZGluZyBpbmRpY2F0b3IKCiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgeyBjYXBhYmlsaXRpZXMgfSA9IGF3YWl0IHByb21pc2UKICAgICAgICBjb25zb2xlLmxvZyhjYXBhYmlsaXRpZXMpOwogICAgICAgIC8vIHN1Y2Nlc3NmdWxseSBpbml0aWFsaXplZAogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGFsZXJ0KGVycm9yLm5hbWUpOwogICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnTm90QWxsb3dlZEVycm9yJykgewogICAgICAgICAgLy8gdXNlciBkZW5pZWQgY2FtZXJhIGFjY2VzcyBwZXJtaXNzb24KICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICdOb3RGb3VuZEVycm9yJykgewogICAgICAgICAgLy8gbm8gc3VpdGFibGUgY2FtZXJhIGRldmljZSBpbnN0YWxsZWQKICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICdOb3RTdXBwb3J0ZWRFcnJvcicpIHsKICAgICAgICAgIC8vIHBhZ2UgaXMgbm90IHNlcnZlZCBvdmVyIEhUVFBTIChvciBsb2NhbGhvc3QpCiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5uYW1lID09PSAnTm90UmVhZGFibGVFcnJvcicpIHsKICAgICAgICAgIC8vIG1heWJlIGNhbWVyYSBpcyBhbHJlYWR5IGluIHVzZQogICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ092ZXJjb25zdHJhaW5lZEVycm9yJykgewogICAgICAgICAgLy8gZGlkIHlvdSByZXF1ZXN0ZWQgdGhlIGZyb250IGNhbWVyYSBhbHRob3VnaCB0aGVyZSBpcyBub25lPwogICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ1N0cmVhbUFwaU5vdFN1cHBvcnRlZEVycm9yJykgewogICAgICAgICAgLy8gYnJvd3NlciBzZWVtcyB0byBiZSBsYWNraW5nIGZlYXR1cmVzCiAgICAgICAgfQogICAgICB9IGZpbmFsbHkgewogICAgICAgIC8vIGhpZGUgbG9hZGluZyBpbmRpY2F0b3IKICAgICAgfQogICAgfSwKICAgICBJc0pzb25TdHJpbmcoc3RyKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgICAgICBjb25zb2xlLmxvZygndHJ5IHN0ciA9PiAnK3N0cik7CiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfSwKICAgIG9uRGVjb2RlIChkZWNvZGVkU3RyaW5nKSB7CiAgICAgIGlmKGRlY29kZWRTdHJpbmcpewogICAgICAgIC8vdGhpcy4kcm91dGVyLnB1c2goJ1dhbGxldCcpCiAgICAgICAgLy92YXIgZGVjcnlwdGVkID0gdGhpcy4kZW5jcnlwdG9yLmRlY3J5cHQoZGVjb2RlZFN0cmluZyk7CiAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgICBkZWNvZGVkU3RyaW5nID0gdGhpcy5Jc0pzb25TdHJpbmcoZGVjb2RlZFN0cmluZyk7CiAgICAgICAgbGV0IHJvdXRlciA9IHRoaXMuJHJvdXRlcjsKICAgICAgICBsZXQgZGIgPSB0aGlzLiRzdG9yZS5zdGF0ZS5kYjsKICAgICAgICBsZXQgcmVmID0gdGhpczsKICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgIGxldCBnZXRVc2VyRG9jUmVmID0gZGIuY29sbGVjdGlvbigndXNlcnMnKS5kb2ModGhpcy4kZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZCk7CgogICAgICAgIGlmKHR5cGVvZiBkZWNvZGVkU3RyaW5nID09PSAnb2JqZWN0Jyl7CiAgICAgICAgICAvL2xvdHRlcnkKICAgICAgICAgIGlmKHR5cGVvZiBkZWNvZGVkU3RyaW5nLnQgIT09ICd1bmRlZmluZWQnKXsKICAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oInFyIikKICAgICAgICAgICAgLndoZXJlKCJ0IiwgIj09IiwgZGVjb2RlZFN0cmluZy50KQogICAgICAgICAgICAud2hlcmUoImFjdGl2YXRlZCIsICI9PSIsIGZhbHNlKQogICAgICAgICAgICAuZ2V0KCkudGhlbigKICAgICAgICAgICAgICBmdW5jdGlvbihxdWVyeVNuYXBzaG90KSB7CiAgICAgICAgICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24oZG9jKSB7CiAgICAgICAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oJ3FyJykuZG9jKGRvYy5pZCkudXBkYXRlKHsndWlkJzpyZWYuJGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51aWQsICdhY3RpdmF0ZWQnOnRydWV9KQogICAgICAgICAgICAgICAgICAudGhlbigKICAgICAgICAgICAgICAgICAgICAoKT0+ewogICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1FSIGFjdGl2ZSB1c2VyIGlzIHVwZGF0ZWQhJyk7CiAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVkU3RyaW5nID0geydiaW5pZCc6MSwgJ2JvbnVzJzpyZWYuJGJvbnVzUmF0ZSwgJ2JvbnVzUmF0ZSc6cmVmLiRib251c1JhdGUsICdjb3VudCc6MSwgJ3JhdGUnOnJlZi4kcmF0ZSwgJ3Rva2Vucyc6cmVmLiRyYXRlLCAndWlkJzpyZWYuJGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51aWQsICd0aW1lJzpEYXRlLm5vdygpLnRvU3RyaW5nKCl9OwogICAgICAgICAgICAgICAgICAgICAgZGIuY29sbGVjdGlvbigidHJhbnNhY3Rpb25zIikuYWRkKGRlY29kZWRTdHJpbmcpCiAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkb2NSZWYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlRyYW5zYWN0aW9uIHdyaXR0ZW4gd2l0aCBJRDogIiwgZG9jUmVmLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAvL3J1biBUUkFOU0ZFUiBVU0VSIHRyYW5zYWN0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRiLnJ1blRyYW5zYWN0aW9uKGZ1bmN0aW9uKHRyYW5zYWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY29kZSBtYXkgZ2V0IHJlLXJ1biBtdWx0aXBsZSB0aW1lcyBpZiB0aGVyZSBhcmUgY29uZmxpY3RzLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb24uZ2V0KGdldFVzZXJEb2NSZWYpLnRoZW4oZnVuY3Rpb24oZ2V0VXNlckRvYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRVc2VyRG9jLmV4aXN0cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93ICJEb2N1bWVudCBkb2VzIG5vdCBleGlzdCEiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1Rva2VucyA9IGdldFVzZXJEb2MuZGF0YSgpLnRva2VucyArIGRlY29kZWRTdHJpbmcudG9rZW5zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0JvbnVzID0gZ2V0VXNlckRvYy5kYXRhKCkuYm9udXMgKyBkZWNvZGVkU3RyaW5nLmJvbnVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnVwZGF0ZShnZXRVc2VyRG9jUmVmLCB7IHRva2VuczogbmV3VG9rZW5zLCBib251czogbmV3Qm9udXN9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJ1c2VyICIrZ2V0VXNlckRvYy5pZCsiIHBsYXllZCBsb3R0ZXJ5IGZvciB0aGUgYW1vdW50IG9mICIrbmV3VG9rZW5zKyIgdG9rZW5zIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJMb3R0ZXJ5IHVzZXIgdHJhbnNhY3Rpb24gc3VjY2Vzc2Z1bGx5IGNvbW1pdHRlZCEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9ydW4gdHJhbnNhY3Rpb24gZm9yIHRyYW5zZmVyIHVzZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goe3BhdGg6J3dhbGxldCcsIG5hbWU6J1dhbGxldCcsIHBhcmFtczp7J3RyYW5zZmVycmVkJzpkZWNvZGVkU3RyaW5nLnRva2Vuc319KTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiVHJhbnNhY3Rpb24gZmFpbGVkOiAiLCBlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBhZGRpbmcgZG9jdW1lbnQ6ICIsIGVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIC8vdHJhbnNmZXIgb3IgdmVuZGluZyBtYWNoaW5lIGdlbmVyYXRpb24KICAgICAgICAgIC8vVFJBTlNGRVIKICAgICAgICAgIGVsc2UgaWYodHlwZW9mIGRlY29kZWRTdHJpbmcudG9rZW5zICE9PSAndW5kZWZpbmVkJyl7CiAgICAgICAgICAgIC8vYWxlcnQoJ0dldCB5b3VyICcrZGVjb2RlZFN0cmluZy50b2tlbnMrJyB0b2tlbnMgZnJvbSAnK2RlY29kZWRTdHJpbmcuZnJvbWlkKycgIScpOwogICAgICAgICAgICAvL2FkZCBvd25lciBvZiB0cmFuc2FjdGlvbgogICAgICAgICAgICBkZWNvZGVkU3RyaW5nLnVpZCA9IHRoaXMuJGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51aWQ7CiAgICAgICAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgICAgIGxldCBnZXRUcmFuc2ZlclVzZXJEb2NSZWYgPSBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmRvYyhkZWNvZGVkU3RyaW5nLmZyb21pZC50b1N0cmluZygpKTsKICAgICAgICAgICAgLy9tYWtlIHN1cmUgd2UgZ2V0IGEgbnVtYmVyIG9mIHRva2VucwogICAgICAgICAgICBkZWNvZGVkU3RyaW5nLnRva2VucyA9IHBhcnNlSW50KGRlY29kZWRTdHJpbmcudG9rZW5zKTsKICAgICAgICAgICAgZGIuY29sbGVjdGlvbigidHJhbnNhY3Rpb25zIikuYWRkKGRlY29kZWRTdHJpbmcpCiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvY1JlZikgewogICAgICAgICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiVHJhbnNhY3Rpb24gd3JpdHRlbiB3aXRoIElEOiAiLCBkb2NSZWYuaWQpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvL3J1biBPV05FUiBVU0VSIHRyYW5zYWN0aW9uCiAgICAgICAgICAgICAgICByZXR1cm4gZGIucnVuVHJhbnNhY3Rpb24oZnVuY3Rpb24odHJhbnNhY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGNvZGUgbWF5IGdldCByZS1ydW4gbXVsdGlwbGUgdGltZXMgaWYgdGhlcmUgYXJlIGNvbmZsaWN0cy4KICAgICAgICAgICAgICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbi5nZXQoZ2V0VXNlckRvY1JlZikudGhlbihmdW5jdGlvbihnZXRVc2VyRG9jKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZ2V0VXNlckRvYy5leGlzdHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93ICJEb2N1bWVudCBkb2VzIG5vdCBleGlzdCEiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdUb2tlbnMgPSBnZXRVc2VyRG9jLmRhdGEoKS50b2tlbnMgKyBkZWNvZGVkU3RyaW5nLnRva2VuczsKICAgICAgICAgICAgICAgICAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24udXBkYXRlKGdldFVzZXJEb2NSZWYsIHsgdG9rZW5zOiBuZXdUb2tlbnMgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJ1c2VyICIrZ2V0VXNlckRvYy5pZCsiIGdvdCAiK25ld1Rva2VucysiIHRva2VucyIpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiR2V0IHVzZXIgdHJhbnNhY3Rpb24gc3VjY2Vzc2Z1bGx5IGNvbW1pdHRlZCEiKTsKICAgICAgICAgICAgICAgICAgICAgLy9ydW4gVFJBTlNGRVIgVVNFUiB0cmFuc2FjdGlvbgogICAgICAgICAgICAgICAgICAgIHJldHVybiBkYi5ydW5UcmFuc2FjdGlvbihmdW5jdGlvbih0cmFuc2FjdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGNvZGUgbWF5IGdldCByZS1ydW4gbXVsdGlwbGUgdGltZXMgaWYgdGhlcmUgYXJlIGNvbmZsaWN0cy4KICAgICAgICAgICAgICAgICAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uLmdldChnZXRUcmFuc2ZlclVzZXJEb2NSZWYpLnRoZW4oZnVuY3Rpb24oZ2V0VHJhbnNmZXJVc2VyRG9jKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdldFRyYW5zZmVyVXNlckRvYy5leGlzdHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAiRG9jdW1lbnQgZG9lcyBub3QgZXhpc3QhIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdUb2tlbnMgPSBnZXRUcmFuc2ZlclVzZXJEb2MuZGF0YSgpLnRva2VucyAtIGRlY29kZWRTdHJpbmcudG9rZW5zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnVwZGF0ZShnZXRUcmFuc2ZlclVzZXJEb2NSZWYsIHsgdG9rZW5zOiBuZXdUb2tlbnMgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidXNlciAiK2dldFRyYW5zZmVyVXNlckRvYy5pZCsiIHRyYW5zZmVycmVkICIrbmV3VG9rZW5zKyIgdG9rZW5zIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJUcmFuc2ZlciB1c2VyIHRyYW5zYWN0aW9uIHN1Y2Nlc3NmdWxseSBjb21taXR0ZWQhIik7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vcnVuIHRyYW5zYWN0aW9uIGZvciB0cmFuc2ZlciB1c2VyCiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHtwYXRoOid3YWxsZXQnLCBuYW1lOidXYWxsZXQnLCBwYXJhbXM6eyd0cmFuc2ZlcnJlZCc6ZGVjb2RlZFN0cmluZy50b2tlbnN9fSk7CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlRyYW5zYWN0aW9uIGZhaWxlZDogIiwgZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiVHJhbnNhY3Rpb24gZmFpbGVkOiAiLCBlcnJvcik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgYWRkaW5nIGRvY3VtZW50OiAiLCBlcnJvcik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgIC8vUkVDWUNMRSB0cmFuc2FjdGlvbiAKICAgICAgICAgIH0gZWxzZSBpZih0eXBlb2YgZGVjb2RlZFN0cmluZy5jb3VudCAhPT0ndW5kZWZpbmVkJyl7CiAgICAgICAgICAgIC8vbGV0IHJlY3ljbGVUaW1lID0gbmV3IERhdGUoZGVjb2RlZFN0cmluZy50aW1lKTsKICAgICAgICAgICAgLy8gYWxlcnQoJ1RoYW5rcyBmb3IgJytkZWNvZGVkU3RyaW5nLmNvdW50KycgJytyZWN5Y2xlVGltZS5nZXREYXRlKCkrJyAnKyhyZWN5Y2xlVGltZS5nZXRNb250aCgpKzEpKycgJytyZWN5Y2xlVGltZS5nZXRGdWxsWWVhcigpKTsKICAgICAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgICAgICAgbGV0IGdldFVzZXJEb2NSZWYgPSBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmRvYyh0aGlzLiRmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudWlkKTsKICAgICAgICAgICAgLy9hZGQgb3duZXIgb2YgdHJhbnNhY3Rpb24KICAgICAgICAgICAgZGVjb2RlZFN0cmluZy51aWQgPSB0aGlzLiRmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudWlkOwogICAgICAgICAgICAvL2NhbGMgcmF0ZXMKICAgICAgICAgICAgZGVjb2RlZFN0cmluZy50b2tlbnMgPSB0aGlzLiRyYXRlKmRlY29kZWRTdHJpbmcuY291bnQ7CiAgICAgICAgICAgIGRlY29kZWRTdHJpbmcucmF0ZSA9IHRoaXMuJHJhdGU7CiAgICAgICAgICAgIC8vY2FsYyBib251c2VzCiAgICAgICAgICAgIGRlY29kZWRTdHJpbmcuYm9udXMgPSB0aGlzLiRib251c1JhdGUqZGVjb2RlZFN0cmluZy5jb3VudDsKICAgICAgICAgICAgZGVjb2RlZFN0cmluZy5ib251c1JhdGUgPSB0aGlzLiRib251c1JhdGU7CiAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oInRyYW5zYWN0aW9ucyIpLmFkZChkZWNvZGVkU3RyaW5nKQogICAgICAgICAgICAudGhlbihmdW5jdGlvbihkb2NSZWYpIHsKICAgICAgICAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlRyYW5zYWN0aW9uIHdyaXR0ZW4gd2l0aCBJRDogIiwgZG9jUmVmLmlkKTsKICAgICAgICAgICAgICAgICAgICAgIC8vcnVuIFRSQU5TRkVSIFVTRVIgdHJhbnNhY3Rpb24KICAgICAgICAgICAgICAgIHJldHVybiBkYi5ydW5UcmFuc2FjdGlvbihmdW5jdGlvbih0cmFuc2FjdGlvbikgewogICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY29kZSBtYXkgZ2V0IHJlLXJ1biBtdWx0aXBsZSB0aW1lcyBpZiB0aGVyZSBhcmUgY29uZmxpY3RzLgogICAgICAgICAgICAgICAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uLmdldChnZXRVc2VyRG9jUmVmKS50aGVuKGZ1bmN0aW9uKGdldFVzZXJEb2MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRVc2VyRG9jLmV4aXN0cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgIkRvY3VtZW50IGRvZXMgbm90IGV4aXN0ISI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1Rva2VucyA9IGdldFVzZXJEb2MuZGF0YSgpLnRva2VucyArIGRlY29kZWRTdHJpbmcudG9rZW5zOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3Qm9udXMgPSBnZXRVc2VyRG9jLmRhdGEoKS5ib251cyArIGRlY29kZWRTdHJpbmcuYm9udXM7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnVwZGF0ZShnZXRVc2VyRG9jUmVmLCB7IHRva2VuczogbmV3VG9rZW5zLCBib251czogbmV3Qm9udXN9KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coInVzZXIgIitnZXRVc2VyRG9jLmlkKyIgcmVjeWNsZWQgZm9yIHRoZSBhbW91bnQgb2YgIituZXdUb2tlbnMrIiB0b2tlbnMiKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlJlY3ljbGluZyB1c2VyIHRyYW5zYWN0aW9uIHN1Y2Nlc3NmdWxseSBjb21taXR0ZWQhIik7CiAgICAgICAgICAgICAgICAgICAgLy9ydW4gdHJhbnNhY3Rpb24gZm9yIHRyYW5zZmVyIHVzZXIKICAgICAgICAgICAgICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHtwYXRoOid3YWxsZXQnLCBuYW1lOidXYWxsZXQnLCBwYXJhbXM6eyd0cmFuc2ZlcnJlZCc6ZGVjb2RlZFN0cmluZy50b2tlbnN9fSk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJUcmFuc2FjdGlvbiBmYWlsZWQ6ICIsIGVycm9yKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBhZGRpbmcgZG9jdW1lbnQ6ICIsIGVycm9yKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYodHlwZW9mIGRlY29kZWRTdHJpbmcuYWN0aXZlICE9PSd1bmRlZmluZWQnKXsKICAgICAgICAgICAgYWxlcnQoZGVjb2RlZFN0cmluZyk7CiAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oJ2Jpbl91c2VycycpCiAgICAgICAgICAgIC53aGVyZSgnZGF0ZXRpbWUnLCc9PScsZGVjb2RlZFN0cmluZy5kYXRldGltZSkKICAgICAgICAgICAgLndoZXJlKCdwZW5kaW5nJywnPT0nLHRydWUpCiAgICAgICAgICAgIC53aGVyZSgnYmluaWQnLCc9PScsZGVjb2RlZFN0cmluZy5iaW5pZCkKICAgICAgICAgICAgLmdldCgpLnRoZW4oZnVuY3Rpb24ocXVlcnlTbmFwc2hvdCkgewogICAgICAgICAgICAgIGlmKHF1ZXJ5U25hcHNob3QuZXhpc3RzKXsKICAgICAgICAgICAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChmdW5jdGlvbihkb2MpIHsKICAgICAgICAgICAgICAgICAgZGIuY29sbGVjdGlvbignYmluX3VzZXJzJykuZG9jKGRvYy5pZCkudXBkYXRlKHsncGVuZGluZyc6ZmFsc2UsICdhY3RpdmUnOnRydWUsJ3VpZCc6cmVmLiRmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudWlkfSk7CiAgICAgICAgICAgICAgICAgIGFsZXJ0KCdhY3RpdmUgdXNlciBpcyB1cGRhdGVkIScpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvciBnZXR0aW5nIGFjdGl2ZSBkb2MiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgICBhbGVydChlcnJvcik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRXJyb3IgZ2V0dGluZyBhY3RpdmUgPT4gIiwgZXJyb3IpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsZXJ0KCdRUiBlcnJvcicpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydCgnUVIgZXJyb3InKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["qr.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"qr.vue","sourceRoot":"src/components","sourcesContent":["/* eslint-disable */\n<template>\n  <v-container>\n    <v-layout\n      text-center\n      wrap\n    >\n      <v-flex xs12>\n        <v-img\n          :src=\"require('../assets/logo2.png')\"\n          class=\"my-3\"\n          contain\n          height=\"180\"\n        ></v-img>\n      </v-flex>\n\n      <v-flex mb-4>\n        <div v-if=\"qrseen\">\n          <v-alert color=\"orange lighten-2\" style=\"padding-top:7px\"><v-icon>mdi-qrcode-scan</v-icon>Наведіть на екран на контейнері для автоматичного сканування</v-alert>\n          <qrcode-stream @decode=\"onDecode\" @init=\"onInit\" height=\"100\"></qrcode-stream>\n        </div>\n        <v-btn v-if=\"!qrseen\" v-on:click=\"qrseen = !qrseen\" x-large color=\"success\" dark>Сканувати QR-код</v-btn>\n        </v-flex>\n     </v-layout>\n  </v-container>\n</template>\n\n<script>\n\nexport default {\n  data: () => ({\n    qrseen:false\n  }),\n  mounted (){\n    \n    /*var qr = this.$qrcode(0, 'H');\n    var transaction = {binid:1, count:1,  time:Date. now()};\n    //var transfer = {fromid:1, tokens:1,  time:Date. now()};\n    transaction = JSON.stringify(transaction);\n    //eslint-disable-next-line no-console\n    console.log(transaction);\n    qr.addData(this.$encryptor.encrypt(JSON.stringify(transaction)));\n    qr.make();\n    document.getElementById('placeHolder').innerHTML = qr.createImgTag();*/\n   \n     document.addEventListener('deviceready', () => {\n      alert(this.$vuecordova.plugins.permissions);\n      console.log('Cordova : device is ready !');\n    });\n  },\n  methods: {\n      //camera QR init\n      async onInit (promise) {\n      // show loading indicator\n\n      try {\n        const { capabilities } = await promise\n        console.log(capabilities);\n        // successfully initialized\n      } catch (error) {\n        alert(error.name);\n        if (error.name === 'NotAllowedError') {\n          // user denied camera access permisson\n        } else if (error.name === 'NotFoundError') {\n          // no suitable camera device installed\n        } else if (error.name === 'NotSupportedError') {\n          // page is not served over HTTPS (or localhost)\n        } else if (error.name === 'NotReadableError') {\n          // maybe camera is already in use\n        } else if (error.name === 'OverconstrainedError') {\n          // did you requested the front camera although there is none?\n        } else if (error.name === 'StreamApiNotSupportedError') {\n          // browser seems to be lacking features\n        }\n      } finally {\n        // hide loading indicator\n      }\n    },\n     IsJsonString(str) {\n        try {\n           //eslint-disable-next-line\n            console.log('try str => '+str);\n            return JSON.parse(str);\n        } catch (e) {\n            return false;\n        }\n    },\n    onDecode (decodedString) {\n      if(decodedString){\n        //this.$router.push('Wallet')\n        //var decrypted = this.$encryptor.decrypt(decodedString);\n        //eslint-disable-next-line\n        decodedString = this.IsJsonString(decodedString);\n        let router = this.$router;\n        let db = this.$store.state.db;\n        let ref = this;\n        //eslint-disable-next-line\n        let getUserDocRef = db.collection('users').doc(this.$firebase.auth().currentUser.uid);\n\n        if(typeof decodedString === 'object'){\n          //lottery\n          if(typeof decodedString.t !== 'undefined'){\n             db.collection(\"qr\")\n            .where(\"t\", \"==\", decodedString.t)\n            .where(\"activated\", \"==\", false)\n            .get().then(\n              function(querySnapshot) {\n                querySnapshot.forEach(function(doc) {\n                  db.collection('qr').doc(doc.id).update({'uid':ref.$firebase.auth().currentUser.uid, 'activated':true})\n                  .then(\n                    ()=>{\n                      alert('QR active user is updated!');\n                      decodedString = {'binid':1, 'bonus':ref.$bonusRate, 'bonusRate':ref.$bonusRate, 'count':1, 'rate':ref.$rate, 'tokens':ref.$rate, 'uid':ref.$firebase.auth().currentUser.uid, 'time':Date.now().toString()};\n                      db.collection(\"transactions\").add(decodedString)\n                      .then(function(docRef) {\n                          //eslint-disable-next-line no-console\n                          console.log(\"Transaction written with ID: \", docRef.id);\n                          //run TRANSFER USER transaction\n                          return db.runTransaction(function(transaction) {\n                              // This code may get re-run multiple times if there are conflicts.\n                              //eslint-disable-next-line\n                              return transaction.get(getUserDocRef).then(function(getUserDoc) {\n                                  if (!getUserDoc.exists) {\n                                      throw \"Document does not exist!\";\n                                  }\n                                  var newTokens = getUserDoc.data().tokens + decodedString.tokens;\n                                  var newBonus = getUserDoc.data().bonus + decodedString.bonus;\n                                  //eslint-disable-next-line\n                                  transaction.update(getUserDocRef, { tokens: newTokens, bonus: newBonus});\n                                  console.log(\"user \"+getUserDoc.id+\" played lottery for the amount of \"+newTokens+\" tokens\");\n                              });\n                          }).then(function() {\n                              console.log(\"Lottery user transaction successfully committed!\");\n                              //run transaction for transfer user\n                              //eslint-disable-next-line\n                              router.push({path:'wallet', name:'Wallet', params:{'transferred':decodedString.tokens}});\n                          }).catch(function(error) {\n                              console.log(\"Transaction failed: \", error);\n                          });\n                      })\n                      .catch(function(error) {\n                        //eslint-disable-next-line no-console\n                          console.error(\"Error adding document: \", error);\n                      });\n                    }\n                  );\n                });\n            });\n          }\n          //transfer or vending machine generation\n          //TRANSFER\n          else if(typeof decodedString.tokens !== 'undefined'){\n            //alert('Get your '+decodedString.tokens+' tokens from '+decodedString.fromid+' !');\n            //add owner of transaction\n            decodedString.uid = this.$firebase.auth().currentUser.uid;\n            //eslint-disable-next-line\n            let getTransferUserDocRef = db.collection('users').doc(decodedString.fromid.toString());\n            //make sure we get a number of tokens\n            decodedString.tokens = parseInt(decodedString.tokens);\n            db.collection(\"transactions\").add(decodedString)\n            .then(function(docRef) {\n               //eslint-disable-next-line no-console\n                console.log(\"Transaction written with ID: \", docRef.id);\n                \n                //run OWNER USER transaction\n                return db.runTransaction(function(transaction) {\n                    // This code may get re-run multiple times if there are conflicts.\n                    //eslint-disable-next-line\n                    return transaction.get(getUserDocRef).then(function(getUserDoc) {\n                        if (!getUserDoc.exists) {\n                            throw \"Document does not exist!\";\n                        }\n                        var newTokens = getUserDoc.data().tokens + decodedString.tokens;\n                        //eslint-disable-next-line\n                        transaction.update(getUserDocRef, { tokens: newTokens });\n                        console.log(\"user \"+getUserDoc.id+\" got \"+newTokens+\" tokens\");\n                    });\n                }).then(function() {\n                    console.log(\"Get user transaction successfully committed!\");\n                     //run TRANSFER USER transaction\n                    return db.runTransaction(function(transaction) {\n                        // This code may get re-run multiple times if there are conflicts.\n                        //eslint-disable-next-line\n                        return transaction.get(getTransferUserDocRef).then(function(getTransferUserDoc) {\n                            if (!getTransferUserDoc.exists) {\n                                throw \"Document does not exist!\";\n                            }\n                            var newTokens = getTransferUserDoc.data().tokens - decodedString.tokens;\n                            //eslint-disable-next-line\n                            transaction.update(getTransferUserDocRef, { tokens: newTokens });\n                            console.log(\"user \"+getTransferUserDoc.id+\" transferred \"+newTokens+\" tokens\");\n                        });\n                    }).then(function() {\n                        console.log(\"Transfer user transaction successfully committed!\");\n                        //run transaction for transfer user\n                        router.push({path:'wallet', name:'Wallet', params:{'transferred':decodedString.tokens}});\n                    }).catch(function(error) {\n                        console.log(\"Transaction failed: \", error);\n                    });\n                }).catch(function(error) {\n                    console.log(\"Transaction failed: \", error);\n                });\n            })\n            .catch(function(error) {\n              //eslint-disable-next-line no-console\n                console.error(\"Error adding document: \", error);\n            });\n           //RECYCLE transaction \n          } else if(typeof decodedString.count !=='undefined'){\n            //let recycleTime = new Date(decodedString.time);\n            // alert('Thanks for '+decodedString.count+' '+recycleTime.getDate()+' '+(recycleTime.getMonth()+1)+' '+recycleTime.getFullYear());\n            //eslint-disable-next-line\n            let getUserDocRef = db.collection('users').doc(this.$firebase.auth().currentUser.uid);\n            //add owner of transaction\n            decodedString.uid = this.$firebase.auth().currentUser.uid;\n            //calc rates\n            decodedString.tokens = this.$rate*decodedString.count;\n            decodedString.rate = this.$rate;\n            //calc bonuses\n            decodedString.bonus = this.$bonusRate*decodedString.count;\n            decodedString.bonusRate = this.$bonusRate;\n            db.collection(\"transactions\").add(decodedString)\n            .then(function(docRef) {\n               //eslint-disable-next-line no-console\n                console.log(\"Transaction written with ID: \", docRef.id);\n                      //run TRANSFER USER transaction\n                return db.runTransaction(function(transaction) {\n                    // This code may get re-run multiple times if there are conflicts.\n                    //eslint-disable-next-line\n                    return transaction.get(getUserDocRef).then(function(getUserDoc) {\n                        if (!getUserDoc.exists) {\n                            throw \"Document does not exist!\";\n                        }\n                        var newTokens = getUserDoc.data().tokens + decodedString.tokens;\n                        var newBonus = getUserDoc.data().bonus + decodedString.bonus;\n                        //eslint-disable-next-line\n                        transaction.update(getUserDocRef, { tokens: newTokens, bonus: newBonus});\n                        console.log(\"user \"+getUserDoc.id+\" recycled for the amount of \"+newTokens+\" tokens\");\n                    });\n                }).then(function() {\n                    console.log(\"Recycling user transaction successfully committed!\");\n                    //run transaction for transfer user\n                    //eslint-disable-next-line\n                    router.push({path:'wallet', name:'Wallet', params:{'transferred':decodedString.tokens}});\n                }).catch(function(error) {\n                    console.log(\"Transaction failed: \", error);\n                });\n            })\n            .catch(function(error) {\n              //eslint-disable-next-line no-console\n                console.error(\"Error adding document: \", error);\n            });\n          } else if(typeof decodedString.active !=='undefined'){\n            alert(decodedString);\n            db.collection('bin_users')\n            .where('datetime','==',decodedString.datetime)\n            .where('pending','==',true)\n            .where('binid','==',decodedString.binid)\n            .get().then(function(querySnapshot) {\n              if(querySnapshot.exists){\n                querySnapshot.forEach(function(doc) {\n                  db.collection('bin_users').doc(doc.id).update({'pending':false, 'active':true,'uid':ref.$firebase.auth().currentUser.uid});\n                  alert('active user is updated!');\n                });\n              } else {\n                alert(\"Error getting active doc\");\n              }\n            }).catch(function(error) {\n                alert(error);\n                console.log(\"Error getting active => \", error);\n            });\n          } else {\n            alert('QR error');\n          }\n        } else {\n          alert('QR error');\n        }\n      }\n    }\n  }\n};\n</script>\n"]}]}