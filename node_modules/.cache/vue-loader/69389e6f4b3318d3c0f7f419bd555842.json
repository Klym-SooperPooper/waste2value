{"remainingRequest":"C:\\apps\\beeko2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\apps\\beeko2\\src\\components\\profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\apps\\beeko2\\src\\components\\profile.vue","mtime":1613240160443},{"path":"C:\\apps\\beeko2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\apps\\beeko2\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\apps\\beeko2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\apps\\beeko2\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1567240334000},{"path":"C:\\apps\\beeko2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\apps\\beeko2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCgluYW1lOiAnUHJvZmlsZScsDQoJZGF0YTogKCkgPT4gKHsNCgkJc2lnbmVkdXA6IGZhbHNlLA0KCQlhdmF0YXJVcGxvYWRlZDogZmFsc2UsDQoJCXVwZGF0ZWQ6IGZhbHNlLA0KCQlmb3JtSXNWYWxpZDogZmFsc2UsDQoJCXZhbGlkOiB0cnVlLA0KCQlwcm9maWxlOnsnbmFtZSc6JycsICdlbWFpbCc6JycsICdwaG9uZSc6JycsICdhdmF0YXInOicnfSwNCgkJcnVsZXM6IFsodikgPT4gISF2IHx8ICfQntCx0L7QsmDRj9C30LrQvtCy0LUg0L/QvtC70LUnXSwNCgkJZW1haWxSdWxlczogWyh2KSA9PiAvLitALisvLnRlc3QodikgfHwgJ9Cd0LXQstGW0YDQvdC40LkgZS1tYWlsJ10sDQoJCWJvbnVzOjANCiAgfSksDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoWyd1c2VyJ10pLA0KICB9LA0KCW1vdW50ZWQoKSB7DQoJCWlmICh0eXBlb2YgdGhpcy4kcm91dGUucGFyYW1zLnNpZ25lZHVwICE9ICd1bmRlZmluZWQnKSB7DQoJCQl0aGlzLnNpZ25lZHVwID0gdGhpcy4kcm91dGUucGFyYW1zLnNpZ25lZHVwOw0KCQl9DQoJfSwNCgltZXRob2RzOiB7DQoJCXZhbGlkYXRlRm9ybSgpIHsNCgkJCWlmICh0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgew0KCQkJCXRoaXMuZm9ybUlzVmFsaWQgPSB0cnVlOw0KCQkJfSBlbHNlIHsNCgkJCQl0aGlzLmZvcm1Jc1ZhbGlkID0gZmFsc2U7DQoJCQl9DQoJCX0sDQoJCXVwbG9hZEF2YXRhcihmaWxlKSB7DQoJCQlsZXQgc3RvcmUgPSB0aGlzLiRzdG9yZTsNCgkJCWxldCBmaXJlYmFzZSA9IHRoaXMuJGZpcmViYXNlOw0KCQkJbGV0IHJlZiA9IHRoaXM7DQoJCQlmaXJlYmFzZQ0KCQkJCS5zdG9yYWdlKCkNCgkJCQkucmVmKCkNCgkJCQkuY2hpbGQoJ2F2YXRhcnMvJyArIHRoaXMudXNlci51aWQpDQoJCQkJLnB1dChmaWxlKQ0KCQkJCS50aGVuKGZ1bmN0aW9uIChzbmFwc2hvdCkgew0KCQkJCQljb25zb2xlLmxvZygnVXBsb2FkZWQgYSBibG9iIG9yIGZpbGUhJyArIHNuYXBzaG90KTsNCgkJCQkJLy9nZXQgdXJsDQoJCQkJCXNuYXBzaG90LnJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKHVybCkgew0KCQkJCQkJc3RvcmUuc3RhdGUuZGINCgkJCQkJCQkuY29sbGVjdGlvbigndXNlcnMnKQ0KCQkJCQkJCS5kb2MoZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZCkNCgkJCQkJCQkudXBkYXRlKHsgYXZhdGFyOiB1cmwgfSk7DQoJCQkJCQl2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCgkJCQkJCXJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkgew0KCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9maWxlQXZhdGFyJykuc3JjID0gZS50YXJnZXQucmVzdWx0Ow0KCQkJCQkJCXJlZi5hdmF0YXJVcGxvYWRlZCA9IHRydWU7DQoJCQkJCQkJc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQoJCQkJCQkJCXJlZi5hdmF0YXJVcGxvYWRlZCA9IGZhbHNlOw0KCQkJCQkJCX0sIDMwMDApOw0KCQkJCQkJfTsNCgkJCQkJCXJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOw0KCQkJCQl9KTsNCgkJCQl9KTsNCgkJfSwNCgkJDQoJCXNhdmVJbmZvKCkgew0KCQkJbGV0IHJlZiA9IHRoaXM7DQoJCQlpZiAocmVmLmZvcm1Jc1ZhbGlkKSB7DQoJCQkJcmVmLiRzdG9yZS5zdGF0ZS5kYg0KCQkJCQkuY29sbGVjdGlvbigndXNlcnMnKQ0KCQkJCQkuZG9jKHJlZi51c2VyLnVpZCkNCgkJCQkJLnVwZGF0ZSh7DQoJCQkJCQluYW1lOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlck5hbWUnKS52YWx1ZSwNCgkJCQkJCWVtYWlsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlckVtYWlsJykudmFsdWUsDQoJCQkJCQlwaG9uZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJQaG9uZScpLnZhbHVlDQoJCQkJCX0pOw0KCQkJCXJlZi51cGRhdGVkID0gdHJ1ZTsNCgkJCQlsZXQgcmVkaXJlY3QgPSByZWYuJHJvdXRlcjsNCgkJCQkNCgkJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCgkJCQkJLy9yZWRpcmVjdCB0byBhY2NvdW50DQoJCQkJCXJlZGlyZWN0LnB1c2goeyBwYXRoOiAnd2FsbGV0JywgbmFtZTogJ1dhbGxldCcgfSk7DQoJCQkJfSwgMzAwMCk7DQoJCQl9IGVsc2Ugew0KCQkJCWFsZXJ0KCfQpNC+0YDQvNCwINC30LDQv9C+0LLQvdC10L3QsCDQvdC10LLRltGA0L3QviEnKTsNCgkJCX0NCgkJfSwNCg0KCQlzaWduT3V0KCkgew0KCQkJaWYgKGNvbmZpcm0oJ9CS0Lgg0LTRltC50YHQvdC+INGF0L7Rh9C10YLQtSDQstC40LnRgtC4INC3INC00L7QtNCw0YLQutGDPycpKSB7DQoJCQkJdGhpcy4kZmlyZWJhc2UNCgkJCQkJLmF1dGgoKQ0KCQkJCQkuc2lnbk91dCgpDQoJCQkJCS50aGVuKCgpID0+IHsNCgkJCQkJCXRoaXMuJHJvdXRlci5wdXNoKHsNCgkJCQkJCQluYW1lOiAnU2lnbnVwJywNCgkJCQkJCQlwYXJhbXM6IHsgbG9nb3V0OiAxIH0sDQoJCQkJCQl9KTsNCgkJCQkJfSk7DQoJCQl9DQoJCX0sDQoJfSwNCn07DQo="},{"version":3,"sources":["profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"profile.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<v-container>\r\n\t\t<v-layout text-center wrap id=\"myProfileForm\">\r\n\t\t\t<v-flex xs12>\r\n\t\t\t\t<template>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h1 class=\"headline\" style=\"color: orange\">Мій профіль</h1>\r\n\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\tabsolute=\"\"\r\n\t\t\t\t\t\t\ttop\r\n\t\t\t\t\t\t\tright\r\n\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\tid=\"signOutBtn\"\r\n\t\t\t\t\t\t\tcolor=\"success\"\r\n\t\t\t\t\t\t\toutlined=\"\"\r\n\t\t\t\t\t\t\tclass=\"mr-4\"\r\n\t\t\t\t\t\t\t@click=\"signOut\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-icon size=\"small\">mdi-arrow-right</v-icon><small>вийти</small>\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<!-- v-if=\"signedup\"-->\r\n\t\t\t\t\r\n\t\t\t\t\t<div class=\"text-center\" v-if=\"!user.email\">\r\n\t\t\t\t\t\t<v-alert color=\"orange lighten-2\" style=\"padding-top: 7px\"\r\n\t\t\t\t\t\t\t><v-icon>mdi-email</v-icon>Вкажіть свій e-mail на випадок зміни\r\n\t\t\t\t\t\t\tномеру телефона</v-alert>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"text-center\" v-if=\"avatarUploaded\">\r\n\t\t\t\t\t\t<v-alert\r\n\t\t\t\t\t\t\tcolor=\"green lighten-2\"\r\n\t\t\t\t\t\t\theight=\"40\"\r\n\t\t\t\t\t\t\tstyle=\"padding-top: 7px\"\r\n\t\t\t\t\t\t\t>Аватар оновлено!</v-alert\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<v-form ref=\"form\" id=\"update-form\" v-model=\"valid\" lazy-validation>\r\n\t\t\t\t\t\t<div id=\"personal\"> \r\n\t\t\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t\t\t<v-header class=\"main-label\" style=\"color:green\"><strong>Персональні дані</strong></v-header>\r\n\t\t\t\t\t\t\t</v-row>\r\n\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\tv-model=\"user.name\"\r\n\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\tid=\"userName\"\r\n\t\t\t\t\t\t\t\tlabel=\"Имя\"\r\n\t\t\t\t\t\t\t\t:rules=\"rules\"\r\n\t\t\t\t\t\t\t\t@change=\"validateForm\"\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\tv-model=\"user.phone\"\r\n\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\tid=\"userPhone\"\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tlabel=\"Телефон\"\r\n\t\t\t\t\t\t\t\tthumb-label\r\n\t\t\t\t\t\t\t\t:rules=\"rules\"\r\n\t\t\t\t\t\t\t\t@change=\"validateForm\"\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\tv-model=\"user.email\"\r\n\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\tid=\"userEmail\"\r\n\t\t\t\t\t\t\t\tlabel=\"E-mail\"\r\n\t\t\t\t\t\t\t\t:rules=\"emailRules\"\r\n\t\t\t\t\t\t\t\t@change=\"validateForm\"\r\n\t\t\t\t\t\t\t></v-text-field>\r\n\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tid=\"profileAvatar\"\r\n\t\t\t\t\t\t\t\tv-if=\"user.avatar\"\r\n\t\t\t\t\t\t\t\tv-bind:src=\"user.avatar\"\r\n\t\t\t\t\t\t\t\twidth=\"150\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<img id=\"profileAvatar\" v-else src=\"\" width=\"150\" />\r\n\t\t\t\t\t\t\t<v-file-input\r\n\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\tid=\"avatarUpload\"\r\n\t\t\t\t\t\t\t\tlabel=\"Загрузить аватар\"\r\n\t\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\t\t@change=\"uploadAvatar($event)\"\r\n\t\t\t\t\t\t\t></v-file-input>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"text-center\" v-if=\"updated\">\r\n\t\t\t\t\t\t\t\t<v-alert\r\n\t\t\t\t\t\t\t\t\tcolor=\"green lighten-2\"\r\n\t\t\t\t\t\t\t\t\theight=\"40\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"padding-top: 7px\"\r\n\t\t\t\t\t\t\t\t\t>Інформацію оновлено!</v-alert\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\tid=\"submitForm\"\r\n\t\t\t\t\t\t\t\t:disabled=\"!formIsValid\"\r\n\t\t\t\t\t\t\t\tcolor=\"success\"\r\n\t\t\t\t\t\t\t\tclass=\"mr-4\"\r\n\t\t\t\t\t\t\t\t@click=\"saveInfo\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tЗберегти\r\n\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</v-form>\r\n\t\t\t\t</template>\r\n\t\t\t</v-flex>\r\n\t\t</v-layout>\r\n\t</v-container>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n\tname: 'Profile',\r\n\tdata: () => ({\r\n\t\tsignedup: false,\r\n\t\tavatarUploaded: false,\r\n\t\tupdated: false,\r\n\t\tformIsValid: false,\r\n\t\tvalid: true,\r\n\t\tprofile:{'name':'', 'email':'', 'phone':'', 'avatar':''},\r\n\t\trules: [(v) => !!v || 'Обов`язкове поле'],\r\n\t\temailRules: [(v) => /.+@.+/.test(v) || 'Невірний e-mail'],\r\n\t\tbonus:0\r\n  }),\r\n  computed: {\r\n    ...mapState(['user']),\r\n  },\r\n\tmounted() {\r\n\t\tif (typeof this.$route.params.signedup != 'undefined') {\r\n\t\t\tthis.signedup = this.$route.params.signedup;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tvalidateForm() {\r\n\t\t\tif (this.$refs.form.validate()) {\r\n\t\t\t\tthis.formIsValid = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.formIsValid = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tuploadAvatar(file) {\r\n\t\t\tlet store = this.$store;\r\n\t\t\tlet firebase = this.$firebase;\r\n\t\t\tlet ref = this;\r\n\t\t\tfirebase\r\n\t\t\t\t.storage()\r\n\t\t\t\t.ref()\r\n\t\t\t\t.child('avatars/' + this.user.uid)\r\n\t\t\t\t.put(file)\r\n\t\t\t\t.then(function (snapshot) {\r\n\t\t\t\t\tconsole.log('Uploaded a blob or file!' + snapshot);\r\n\t\t\t\t\t//get url\r\n\t\t\t\t\tsnapshot.ref.getDownloadURL().then(function (url) {\r\n\t\t\t\t\t\tstore.state.db\r\n\t\t\t\t\t\t\t.collection('users')\r\n\t\t\t\t\t\t\t.doc(firebase.auth().currentUser.uid)\r\n\t\t\t\t\t\t\t.update({ avatar: url });\r\n\t\t\t\t\t\tvar reader = new FileReader();\r\n\t\t\t\t\t\treader.onload = function (e) {\r\n\t\t\t\t\t\t\tdocument.getElementById('profileAvatar').src = e.target.result;\r\n\t\t\t\t\t\t\tref.avatarUploaded = true;\r\n\t\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t\tref.avatarUploaded = false;\r\n\t\t\t\t\t\t\t}, 3000);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treader.readAsDataURL(file);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\tsaveInfo() {\r\n\t\t\tlet ref = this;\r\n\t\t\tif (ref.formIsValid) {\r\n\t\t\t\tref.$store.state.db\r\n\t\t\t\t\t.collection('users')\r\n\t\t\t\t\t.doc(ref.user.uid)\r\n\t\t\t\t\t.update({\r\n\t\t\t\t\t\tname: document.getElementById('userName').value,\r\n\t\t\t\t\t\temail: document.getElementById('userEmail').value,\r\n\t\t\t\t\t\tphone: document.getElementById('userPhone').value\r\n\t\t\t\t\t});\r\n\t\t\t\tref.updated = true;\r\n\t\t\t\tlet redirect = ref.$router;\r\n\t\t\t\t\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t//redirect to account\r\n\t\t\t\t\tredirect.push({ path: 'wallet', name: 'Wallet' });\r\n\t\t\t\t}, 3000);\r\n\t\t\t} else {\r\n\t\t\t\talert('Форма заповнена невірно!');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsignOut() {\r\n\t\t\tif (confirm('Ви дійсно хочете вийти з додатку?')) {\r\n\t\t\t\tthis.$firebase\r\n\t\t\t\t\t.auth()\r\n\t\t\t\t\t.signOut()\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\t\tname: 'Signup',\r\n\t\t\t\t\t\t\tparams: { logout: 1 },\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n"]}]}