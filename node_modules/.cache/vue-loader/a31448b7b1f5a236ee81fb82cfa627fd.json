{"remainingRequest":"D:\\beeko\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\beeko\\src\\components\\qr.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\beeko\\src\\components\\qr.vue","mtime":1576861088463},{"path":"D:\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1567240333000},{"path":"D:\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiAoewogICAgcXJzZWVuOmZhbHNlCiAgfSksCiAgbW91bnRlZCAoKXsKICAgIC8qdmFyIHFyID0gdGhpcy4kcXJjb2RlKDAsICdIJyk7CiAgICB2YXIgdHJhbnNhY3Rpb24gPSB7YmluaWQ6MSwgY291bnQ6MSwgIHRpbWU6RGF0ZS4gbm93KCl9OwogICAgdmFyIHRyYW5zZmVyID0ge2Zyb21pZDoxLCB0b2tlbnM6MSwgIHRpbWU6RGF0ZS4gbm93KCl9OwogICAgdHJhbnNhY3Rpb24gPSBKU09OLnN0cmluZ2lmeSh0cmFuc2FjdGlvbik7CiAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICBjb25zb2xlLmxvZyh0cmFuc2FjdGlvbik7CiAgICBxci5hZGREYXRhKHRoaXMuJGVuY3J5cHRvci5lbmNyeXB0KEpTT04uc3RyaW5naWZ5KHRyYW5zYWN0aW9uKSkpOwogICAgcXIubWFrZSgpOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYWNlSG9sZGVyJykuaW5uZXJIVE1MID0gcXIuY3JlYXRlSW1nVGFnKCk7Ki8KICB9LAogIG1ldGhvZHM6IHsKICAgICBJc0pzb25TdHJpbmcoc3RyKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9LAogICAgb25EZWNvZGUgKGRlY29kZWRTdHJpbmcpIHsKICAgICAgaWYoZGVjb2RlZFN0cmluZyl7CiAgICAgICAgLy90aGlzLiRyb3V0ZXIucHVzaCgnV2FsbGV0JykKICAgICAgICAvL3ZhciBkZWNyeXB0ZWQgPSB0aGlzLiRlbmNyeXB0b3IuZGVjcnlwdChkZWNvZGVkU3RyaW5nKTsKICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgIGRlY29kZWRTdHJpbmcgPSB0aGlzLklzSnNvblN0cmluZyhkZWNvZGVkU3RyaW5nKTsKICAgICAgICBpZih0eXBlb2YgZGVjb2RlZFN0cmluZyA9PT0gJ29iamVjdCcpewogICAgICAgICAgaWYodHlwZW9mIGRlY29kZWRTdHJpbmcudG9rZW5zICE9PSAndW5kZWZpbmVkJyl7CiAgICAgICAgICAgIGFsZXJ0KCdHZXQgeW91ciAnK2RlY29kZWRTdHJpbmcudG9rZW5zKycgdG9rZW5zIScpOwoKICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZGIuY29sbGVjdGlvbigiY2l0aWVzIikuYWRkKGRlY29kZWRTdHJpbmcpCiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvY1JlZikgewogICAgICAgICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRG9jdW1lbnQgd3JpdHRlbiB3aXRoIElEOiAiLCBkb2NSZWYuaWQpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBhZGRpbmcgZG9jdW1lbnQ6ICIsIGVycm9yKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYodHlwZW9mIGRlY29kZWRTdHJpbmcuY291bnQgIT09J3VuZGVmaW5lZCcpewogICAgICAgICAgICBsZXQgcmVjeWNsZVRpbWUgPSBuZXcgRGF0ZShkZWNvZGVkU3RyaW5nLnRpbWUpOwogICAgICAgICAgICBhbGVydChyZWN5Y2xlVGltZS5nZXREYXRlKCkrJyAnKyhyZWN5Y2xlVGltZS5nZXRNb250aCgpKzEpKycgJytyZWN5Y2xlVGltZS5nZXRGdWxsWWVhcigpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsZXJ0KCdRUiBlcnJvcicpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydCgnUVIgZXJyb3InKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["qr.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"qr.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container>\n    <v-layout\n      text-center\n      wrap\n    >\n      <v-flex xs12>\n        <v-img\n          :src=\"require('../assets/logo.png')\"\n          class=\"my-3\"\n          contain\n          height=\"60\"\n        ></v-img>\n      </v-flex>\n\n      <v-flex mb-4>\n        <h1 class=\"headline\" style=\"color:orange\">\n          Сканувати QR\n        </h1>\n        <v-alert color=\"orange lighten-2\" style=\"padding-top:7px\"><v-icon>mdi-qrcode-scan</v-icon>Наведіть на екран на контейнері для автоматичного сканування</v-alert>\n        <qrcode-stream v-if=\"qrseen\" @decode=\"onDecode\" height=\"100\"></qrcode-stream>\n        <v-btn v-if=\"!qrseen\" v-on:click=\"qrseen = !qrseen\" x-large color=\"success\" dark>Сканувати QR-код</v-btn>\n      </v-flex>\n     </v-layout>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  data: () => ({\n    qrseen:false\n  }),\n  mounted (){\n    /*var qr = this.$qrcode(0, 'H');\n    var transaction = {binid:1, count:1,  time:Date. now()};\n    var transfer = {fromid:1, tokens:1,  time:Date. now()};\n    transaction = JSON.stringify(transaction);\n    //eslint-disable-next-line no-console\n    console.log(transaction);\n    qr.addData(this.$encryptor.encrypt(JSON.stringify(transaction)));\n    qr.make();\n    document.getElementById('placeHolder').innerHTML = qr.createImgTag();*/\n  },\n  methods: {\n     IsJsonString(str) {\n        try {\n            return JSON.parse(str);\n        } catch (e) {\n            return false;\n        }\n    },\n    onDecode (decodedString) {\n      if(decodedString){\n        //this.$router.push('Wallet')\n        //var decrypted = this.$encryptor.decrypt(decodedString);\n        //eslint-disable-next-line\n        decodedString = this.IsJsonString(decodedString);\n        if(typeof decodedString === 'object'){\n          if(typeof decodedString.tokens !== 'undefined'){\n            alert('Get your '+decodedString.tokens+' tokens!');\n\n            this.$store.state.db.collection(\"cities\").add(decodedString)\n            .then(function(docRef) {\n               //eslint-disable-next-line no-console\n                console.log(\"Document written with ID: \", docRef.id);\n            })\n            .catch(function(error) {\n              //eslint-disable-next-line no-console\n                console.error(\"Error adding document: \", error);\n            });\n          } else if(typeof decodedString.count !=='undefined'){\n            let recycleTime = new Date(decodedString.time);\n            alert(recycleTime.getDate()+' '+(recycleTime.getMonth()+1)+' '+recycleTime.getFullYear());\n          } else {\n            alert('QR error');\n          }\n        } else {\n          alert('QR error');\n        }\n      }\n    }\n  }\n};\n</script>\n"]}]}