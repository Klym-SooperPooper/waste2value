{"remainingRequest":"D:\\beeko\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\beeko\\src\\components\\ads.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\beeko\\src\\components\\ads.vue","mtime":1584793411980},{"path":"D:\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1567240333000},{"path":"D:\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZm9vJywKICBkYXRhOiAoKSA9PiAoewogICAgdXBsb2FkZWRGaWxlOmZhbHNlLAogICAgdXBkYXRlZDpmYWxzZSwKICAgIGRlbGV0ZUlEOic2VjJzSkNQWVBNOFRPUThDTDM1QycsCiAgICBhZHM6JycsCiAgICBtaW46IDAsCiAgICAgICAgbWF4OiAxMDAwLAogICAgICAgIHNsaWRlcjogNDAwLAogICAgICAgIHJhbmdlOiBbMTAwLCA1MDBdLAogICAgZWNvc3lzdGVtOiBbCiAgICAgIHsKICAgICAgICB0ZXh0OiAndnVldGlmeS1sb2FkZXInLAogICAgICAgIGhyZWY6ICdodHRwczovL2dpdGh1Yi5jb20vdnVldGlmeWpzL3Z1ZXRpZnktbG9hZGVyJywKICAgICAgfSwKICAgICAgewogICAgICAgIHRleHQ6ICdnaXRodWInLAogICAgICAgIGhyZWY6ICdodHRwczovL2dpdGh1Yi5jb20vdnVldGlmeWpzL3Z1ZXRpZnknLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGV4dDogJ2F3ZXNvbWUtdnVldGlmeScsCiAgICAgICAgaHJlZjogJ2h0dHBzOi8vZ2l0aHViLmNvbS92dWV0aWZ5anMvYXdlc29tZS12dWV0aWZ5JywKICAgICAgfSwKICAgIF0sCiAgICBhZGRQb3N0RGlhbG9nOmZhbHNlLAogICAgZm9ybUlzVmFsaWQ6ZmFsc2UsCiAgICB2YWxpZDp0cnVlLAogICAgYWRSdWxlczogWwogICAgICAgIHYgPT4gISF2IHx8ICfQntCx0L7QsmDRj9C30LrQvtCy0LUg0L/QvtC70LUnCiAgICBdCiAgfSksCiAgYXN5bmMgbW91bnRlZCgpewogICAgYXdhaXQgdGhpcy4kc3RvcmUuc3RhdGUuZGIuY29sbGVjdGlvbignY2xhc3NpZmllZHMnKS5vcmRlckJ5KCdjcmVhdGVkJywnZGVzYycpLm9uU25hcHNob3QoCiAgICAgIChxdWVyeVNuYXBzaG90KT0+ewogICAgICAgICB0aGlzLmFkcyA9IHF1ZXJ5U25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7CiAgICAgICAgICAgICAgICAgICdpZCc6IGRvYy5pZCwKICAgICAgICAgICAgICAgICAgJ2ltYWdlJzogZG9jLmRhdGEoKS5pbWFnZSwKICAgICAgICAgICAgICAgICAgJ3RleHQnOmRvYy5kYXRhKCkudGV4dCwKICAgICAgICAgICAgICAgICAgJ3RpdGxlJzpkb2MuZGF0YSgpLnRpdGxlLAogICAgICAgICAgICAgICAgICAncHJpY2UnOmRvYy5kYXRhKCkucHJpY2UsCiAgICAgICAgICAgICAgICAgICd1aWQnOmRvYy5kYXRhKCkudWlkCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICk7CiAgfSwKICAgbWV0aG9kczp7CiAgICBjYWxsVXNlcih1aWQpewogICAgICBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS5kYi5jb2xsZWN0aW9uKCd1c2VycycpKTsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZGIuY29sbGVjdGlvbigndXNlcnMnKS5kb2ModWlkKS5nZXQoKS50aGVuKAogICAgICAgIChkb2MpPT57CiAgICAgICAgICBpZihjb25maXJtKCfQn9C+0LTQt9Cy0L7QvdC40YLQuCDQv9GA0L7QtNCw0LLRhtGOINC90LAgJytkb2MuZGF0YSgpLnBob25lKycgPycpKXsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9InRlbDovLyIrZG9jLmRhdGEoKS5waG9uZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICk7CiAgICB9LCAKICAgIGdldEFkZHJlc3NEYXRhOiBmdW5jdGlvbiAoYWRkcmVzc0RhdGEsIHBsYWNlUmVzdWx0RGF0YSwgaWQpIHsKICAgICAgICBhbGVydChhZGRyZXNzRGF0YStwbGFjZVJlc3VsdERhdGEraWQpOwogICAgfSwKICAgIHZhbGlkYXRlRm9ybSgpewogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICB0aGlzLmZvcm1Jc1ZhbGlkID0gdHJ1ZTsKICAgICAgfSBlbHNlewogICAgICAgICB0aGlzLmZvcm1Jc1ZhbGlkID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBpbnZva2VVcGxvYWQoKXsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltYWdlVXBsb2FkJykuY2xpY2soKTsKICAgIH0sCiAgICBjb21pbmdTb29uKCl7CiAgICAgIGFsZXJ0KCfQvdC10LfQsNCx0LDRgNC+0LwnKTsKICAgIH0sCiAgICBwcmV2aWV3UGhvdG8oaW5wdXQpIHsKICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICB0aGlzLnVwbG9hZGVkRmlsZSA9IGlucHV0OwogICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlld0ltYWdlJykuc3JjID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgIH0KICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChpbnB1dCk7CiAgICB9LAogICAgZGVsZXRlQWQoYWRLZXkpewogICAgICBpZihjb25maXJtKCfQktC40LTQsNC70LjRgtC4INC+0LPQvtC70L7RiNC10L3QvdGPPycpKXsKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5kYi5jb2xsZWN0aW9uKCdjbGFzc2lmaWVkcycpLmRvYyhhZEtleSkuZGVsZXRlKCkudGhlbigKICAgICAgICAgIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWxldGVkIGFkID0+ICcuYWRLZXkpOwogICAgICAgICAgfQogICAgICAgICkKICAgICAgfQogICAgfSwKICAgIHBvc3RBZCgpewogICAgICBsZXQgc3RvcmUgPSB0aGlzLiRzdG9yZTsKICAgICAgbGV0IGZpcmViYXNlID0gdGhpcy4kZmlyZWJhc2U7CiAgICAgIGxldCB1cGxvYWRlZEZpbGUgPSB0aGlzLnVwbG9hZGVkRmlsZTsKICAgICAgbGV0IHJlZiA9IHRoaXM7CgogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5kYi5jb2xsZWN0aW9uKCdjbGFzc2lmaWVkcycpLmFkZCh7J3VpZCc6dGhpcy4kZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZCwgJ2NyZWF0ZWQnOkRhdGUuIG5vdygpLCAncHJpY2UnOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZFByaWNlJykudmFsdWUsICd0aXRsZSc6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkVGl0bGUnKS52YWx1ZSwgJ3RleHQnOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZFRleHQnKS52YWx1ZX0pLnRoZW4oCiAgICAgICAgKGFkKT0+ewogICAgICAgICAgY29uc29sZS5sb2coIkRvY3VtZW50IHdyaXR0ZW4gd2l0aCBJRDogIiwgYWQuaWQpOwogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkUHJpY2UnKS52YWx1ZT0nJztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRUZXh0JykudmFsdWU9Jyc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkVGl0bGUnKS52YWx1ZT0nJzsKICAgICAgICAgIHJlZi51cGRhdGVkID0gdHJ1ZTsKICAgICAgICAgIAogICAgICAgICAgaWYodGhpcy51cGxvYWRlZEZpbGUpewogICAgICAgICAgICAvL2FkZCBpbWFnZSBhbmQgdXBkYXRlCiAgICAgICAgICAgIGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoKS5jaGlsZCgnY2xhc3NpZmllZHMvJythZC5pZCkucHV0KHVwbG9hZGVkRmlsZSkudGhlbihmdW5jdGlvbihzbmFwc2hvdCkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGxvYWRlZCBhIGJsb2Igb3IgZmlsZSEnK3NuYXBzaG90KTsKICAgICAgICAgICAgICAvL2dldCB1cmwKICAgICAgICAgICAgICBzbmFwc2hvdC5yZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uKHVybCkgewogICAgICAgICAgICAgICAgc3RvcmUuc3RhdGUuZGIuY29sbGVjdGlvbignY2xhc3NpZmllZHMnKS5kb2MoYWQuaWQpLnVwZGF0ZSh7J2ltYWdlJzp1cmx9KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGxvYWRlZCBpbWFnZSEnK3VybCk7CiAgICAgICAgICAgICAgICByZWYudXBsb2FkZWRGaWxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlld0ltYWdlJykuc3JjID0gJyc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VVcGxvYWQnKS52YWx1ZT0nJzsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZWYuYWRkUG9zdERpYWxvZyA9IGZhbHNlOyAgcmVmLnVwZGF0ZWQgPSBmYWxzZTt9LCAyMDAwKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmVmLmFkZFBvc3REaWFsb2cgPSBmYWxzZTsgcmVmLnVwZGF0ZWQgPSBmYWxzZTt9LCAyMDAwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICk7CiAgICB9CiAgIH0KfTsK"},{"version":3,"sources":["ads.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ads.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container>\n    <v-layout\n      text-center\n      wrap\n    >\n        <v-flex xs12>\n        <h1 class=\"headline\" style=\"color:orange\">\n            Дошка оголошень\n         </h1>\n         <v-btn color=\"green\" dark @click.stop=\"addPostDialog = true\">\n          Додати\n          <v-icon right>mdi-plus</v-icon>\n        </v-btn> \n        <br/>\n        <v-dialog v-model=\"addPostDialog\" max-width=\"290\">\n          <v-card>\n            <v-card-title>Додати оголошення</v-card-title>\n              <v-card-text>\n              <img src=\"\" v-if=\"uploadedFile\" width=\"225\" id=\"previewImage\" /> \n              <v-form ref=\"form\" id=\"adForm\" v-model=\"valid\" lazy-validation>\n                  <v-btn color=\"success\" id=\"invokeUpload\" class=\"mr-4\" @click=\"invokeUpload\" outlined=\"\">Завантажити файл</v-btn>\n                  <v-file-input height=\"15\" outlined id=\"imageUpload\" label=\"Завантажити фото\" @change=\"previewPhoto($event)\"></v-file-input>\n                  <v-text-field height=\"15\" outlined id=\"adTitle\" label=\"Назва оголошення\" :rules=\"adRules\" @change=\"validateForm\" required></v-text-field>\n                  <v-textarea outlined id=\"adText\" label=\"Додати опис\" :rules=\"adRules\" @change=\"validateForm\" required></v-textarea>\n                  <v-text-field height=\"15\" outlined id=\"adPrice\" label=\"Вказати ціну\" :rules=\"adRules\" @change=\"validateForm\" required></v-text-field>               \n                  <v-text-field height=\"15\" outlined id=\"adLocation\" label=\"Вказати місце\" @change=\"validateForm\" append-outer-icon=\"mdi-map-marker\"></v-text-field>\n                  \n                  <div class=\"text-center\" v-if=\"updated\">\n                    <v-alert color=\"green lighten-2\" height=\"40\" style=\"padding-top:7px\">Оголошення додано!</v-alert>\n                  </div>\n                  <v-btn id=\"submitForm\"\n                    :disabled=\"!formIsValid\"\n                    color=\"success\"\n                    class=\"mr-4\"\n                    @click=\"postAd\"\n                    centered\n                  >\n                    Опублікувати\n                  </v-btn>\n                </v-form>\n              </v-card-text>\n            </v-card>\n          </v-dialog>\n          <br/>\n          <!--\n            <v-sheet class=\"text-left\">Сортувати за ціною</v-sheet>\n            \n            <v-range-slider\n            v-model=\"range\"\n            :max=\"max\"\n            :min=\"min\"\n            hide-details\n            class=\"align-center\"\n            color=\"orange\"\n            track-color=\"grey\"\n          >\n            <template v-slot:prepend>\n              <v-text-field\n                v-model=\"range[0]\"\n                class=\"mt-0 pt-0\"\n                hide-details\n                single-line\n                type=\"number\"\n                style=\"width: 60px\"\n              ></v-text-field>\n            </template>\n            <template v-slot:append>\n              <v-text-field\n                v-model=\"range[1]\"\n                class=\"mt-0 pt-0\"\n                hide-details\n                single-line\n                type=\"number\"\n                style=\"width: 60px\"\n              ></v-text-field>\n            </template>\n          </v-range-slider>\n        -->\n          <v-card class=\"mx-auto adDiv\" v-for=\"ad in ads\" :key=\"ad.id\" max-width=\"400\">\n          <v-img v-if=\"ad.image\" class=\"white--text align-end\" height=\"200px\" v-bind:src=\"ad.image\">\n            <v-card-title><span>{{ad.title}}</span></v-card-title>\n          </v-img>\n          <v-img v-else class=\"white--text align-end\" height=\"200px\" src=\"https://firebasestorage.googleapis.com/v0/b/beeco-b0ed5.appspot.com/o/beeco-add-default.png?alt=media&amp;token=df84a672-29af-443c-8727-0dd4e66736c0\">  \n            <v-card-title><span>{{ad.title}}</span></v-card-title>\n          </v-img>\n          <v-card-text class=\"text--primary\">\n            <div>{{ad.text}}</div>\n          </v-card-text>\n          <v-chip color=\"transparent\">\n            <v-icon color=\"#07C01A\" small>mdi-coin-outline</v-icon>\n            {{ad.price}}\n          </v-chip>\n          <br/>\n          <v-chip color=\"transparent\">\n            <v-icon color=\"grey\" small>mdi-map-marker</v-icon>\n            Коростень, Житомирська область\n          </v-chip>\nfff\n          <vuetify-google-autocomplete\n            ref=\"address\"\n            id=\"map\"\n            classname=\"form-control\"\n            placeholder=\"Please type your address\"\n            v-on:placechanged=\"getAddressData\"\n            country=\"sg\"\n        >\n        </vuetify-google-autocomplete>\n\n          <v-card-actions>\n            <v-btn absolute bottom right v-if=\"ad.uid==$firebase.auth().currentUser.uid\" @click=\"deleteAd(ad.id)\"><v-icon>mdi-close</v-icon></v-btn>\n            <v-btn outlined color=\"orange\" text @click=\"comingSoon\">Аукціон</v-btn>\n            <v-btn color=\"orange\" dark @click=\"callUser(ad.uid)\">Купити</v-btn>\n            <v-btn outlined=\"\" color=\"green\" @click=\"callUser(ad.uid)\"><v-icon>mdi-truck-delivery-outline</v-icon>Вивезти</v-btn>\n          </v-card-actions>\n        </v-card>\n          <!--\n          <v-card v-for=\"ad in ads\" :key=\"ad.id\" class=\"mx-auto adDiv\" outlined>\n            <v-btn v-if=\"ad.uid==$firebase.auth().currentUser.uid\" @click=\"deleteAd(ad.id)\"><v-icon>mdi-close</v-icon></v-btn>\n            <v-list-item two-line>\n              <v-list-item-content>\n                <v-list-item-title class=\"headline mb-1 text-left\">{{ad.title}}</v-list-item-title>\n                <v-list-item-subtitle class=\"text-left\">{{ad.text}}</v-list-item-subtitle>\n              </v-list-item-content>\n              <img v-bind:src=\"ad.image\" width=\"50\"/>\n            </v-list-item>\n             <v-layout justify-end>\n              <v-chip text-color=\"#07C01A\" color=\"transparent\">\n                <v-icon color=\"#07C01A\" small>mdi-coin-outline</v-icon>\n                  {{ad.price}}\n              </v-chip>\n              <v-btn color=\"orange\" text @click=\"comingSoon\">Аукціон</v-btn>\n              <v-btn color=\"orange\" dark @click=\"callUser(ad.uid)\">Купити</v-btn>\n            </v-layout>\n          </v-card>\n          -->\n          \n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  name: 'foo',\n  data: () => ({\n    uploadedFile:false,\n    updated:false,\n    deleteID:'6V2sJCPYPM8TOQ8CL35C',\n    ads:'',\n    min: 0,\n        max: 1000,\n        slider: 400,\n        range: [100, 500],\n    ecosystem: [\n      {\n        text: 'vuetify-loader',\n        href: 'https://github.com/vuetifyjs/vuetify-loader',\n      },\n      {\n        text: 'github',\n        href: 'https://github.com/vuetifyjs/vuetify',\n      },\n      {\n        text: 'awesome-vuetify',\n        href: 'https://github.com/vuetifyjs/awesome-vuetify',\n      },\n    ],\n    addPostDialog:false,\n    formIsValid:false,\n    valid:true,\n    adRules: [\n        v => !!v || 'Обов`язкове поле'\n    ]\n  }),\n  async mounted(){\n    await this.$store.state.db.collection('classifieds').orderBy('created','desc').onSnapshot(\n      (querySnapshot)=>{\n         this.ads = querySnapshot.docs.map(doc => ({\n                  'id': doc.id,\n                  'image': doc.data().image,\n                  'text':doc.data().text,\n                  'title':doc.data().title,\n                  'price':doc.data().price,\n                  'uid':doc.data().uid\n                })\n          );\n        }\n      );\n  },\n   methods:{\n    callUser(uid){\n      console.log(this.$store.state.db.collection('users'));\n      this.$store.state.db.collection('users').doc(uid).get().then(\n        (doc)=>{\n          if(confirm('Подзвонити продавцю на '+doc.data().phone+' ?')){\n            window.location.href=\"tel://\"+doc.data().phone;\n          }\n        }\n      );\n    }, \n    getAddressData: function (addressData, placeResultData, id) {\n        alert(addressData+placeResultData+id);\n    },\n    validateForm(){\n      if (this.$refs.form.validate()) {\n        this.formIsValid = true;\n      } else{\n         this.formIsValid = false;\n      }\n    },\n    invokeUpload(){\n      document.getElementById('imageUpload').click();\n    },\n    comingSoon(){\n      alert('незабаром');\n    },\n    previewPhoto(input) {\n        var reader = new FileReader();\n        this.uploadedFile = input;\n        reader.onload = function(e) {\n          document.getElementById('previewImage').src = e.target.result;\n        }\n        reader.readAsDataURL(input);\n    },\n    deleteAd(adKey){\n      if(confirm('Видалити оголошення?')){\n        this.$store.state.db.collection('classifieds').doc(adKey).delete().then(\n          function(){\n            console.log('deleted ad => '.adKey);\n          }\n        )\n      }\n    },\n    postAd(){\n      let store = this.$store;\n      let firebase = this.$firebase;\n      let uploadedFile = this.uploadedFile;\n      let ref = this;\n\n      this.$store.state.db.collection('classifieds').add({'uid':this.$firebase.auth().currentUser.uid, 'created':Date. now(), 'price':document.getElementById('adPrice').value, 'title':document.getElementById('adTitle').value, 'text':document.getElementById('adText').value}).then(\n        (ad)=>{\n          console.log(\"Document written with ID: \", ad.id);\n          document.getElementById('adPrice').value='';document.getElementById('adText').value='';document.getElementById('adTitle').value='';\n          ref.updated = true;\n          \n          if(this.uploadedFile){\n            //add image and update\n            firebase.storage().ref().child('classifieds/'+ad.id).put(uploadedFile).then(function(snapshot) {\n              console.log('Uploaded a blob or file!'+snapshot);\n              //get url\n              snapshot.ref.getDownloadURL().then(function(url) {\n                store.state.db.collection('classifieds').doc(ad.id).update({'image':url});\n                console.log('Uploaded image!'+url);\n                ref.uploadedFile = false;\n                document.getElementById('previewImage').src = '';\n                document.getElementById('imageUpload').value='';\n                setTimeout(function(){ref.addPostDialog = false;  ref.updated = false;}, 2000);\n              });\n            });\n          } else {\n            setTimeout(function(){ref.addPostDialog = false; ref.updated = false;}, 2000);\n          }\n        }\n      );\n    }\n   }\n};\n</script>\n"]}]}