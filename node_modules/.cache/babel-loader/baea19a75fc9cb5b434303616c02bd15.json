{"remainingRequest":"D:\\beeko\\node_modules\\babel-loader\\lib\\index.js!D:\\beeko\\node_modules\\vuetify-loader\\lib\\loader.js!D:\\beeko\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\beeko\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\beeko\\src\\components\\profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\beeko\\src\\components\\profile.vue","mtime":1584872811585},{"path":"D:\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1567240333000},{"path":"D:\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\beeko\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQcm9maWxlJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2lnbmVkdXA6IGZhbHNlLAogICAgICBhdmF0YXJVcGxvYWRlZDogZmFsc2UsCiAgICAgIHVwZGF0ZWQ6IGZhbHNlLAogICAgICBmb3JtSXNWYWxpZDogZmFsc2UsCiAgICAgIHZhbGlkOiB0cnVlLAogICAgICAvL3Byb2ZpbGU6eyduYW1lJzonJywgJ2VtYWlsJzonJywgJ3Bob25lJzonJywgJ2F2YXRhcic6Jyd9LAogICAgICBuYW1lUnVsZXM6IFtmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiAhIXYgfHwgJ9Ce0LHQvtCyYNGP0LfQutC+0LLQtSDQv9C+0LvQtSc7CiAgICAgIH1dLAogICAgICBlbWFpbFJ1bGVzOiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gLy4rQC4rLy50ZXN0KHYpIHx8ICfQndC10LLRltGA0L3QuNC5IGUtbWFpbCc7CiAgICAgIH1dCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGlmICh0eXBlb2YgdGhpcy4kcm91dGUucGFyYW1zLnNpZ25lZHVwICE9ICd1bmRlZmluZWQnKSB7CiAgICAgIHRoaXMuc2lnbmVkdXAgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuc2lnbmVkdXA7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB2YWxpZGF0ZUZvcm06IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybSgpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgdGhpcy5mb3JtSXNWYWxpZCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mb3JtSXNWYWxpZCA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgdXBsb2FkQXZhdGFyOiBmdW5jdGlvbiB1cGxvYWRBdmF0YXIoZmlsZSkgewogICAgICB2YXIgc3RvcmUgPSB0aGlzLiRzdG9yZTsKICAgICAgdmFyIGZpcmViYXNlID0gdGhpcy4kZmlyZWJhc2U7CiAgICAgIHZhciByZWYgPSB0aGlzOwogICAgICBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCkuY2hpbGQoJ2F2YXRhcnMvJyArIHRoaXMuJGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51aWQpLnB1dChmaWxlKS50aGVuKGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgIGNvbnNvbGUubG9nKCdVcGxvYWRlZCBhIGJsb2Igb3IgZmlsZSEnICsgc25hcHNob3QpOyAvL2dldCB1cmwKCiAgICAgICAgc25hcHNob3QucmVmLmdldERvd25sb2FkVVJMKCkudGhlbihmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICBzdG9yZS5zdGF0ZS5kYi5jb2xsZWN0aW9uKCd1c2VycycpLmRvYyhmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudWlkKS51cGRhdGUoewogICAgICAgICAgICAnYXZhdGFyJzogdXJsCiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZmlsZUF2YXRhcicpLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgICAgcmVmLmF2YXRhclVwbG9hZGVkID0gdHJ1ZTsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmVmLmF2YXRhclVwbG9hZGVkID0gZmFsc2U7CiAgICAgICAgICAgIH0sIDMwMDApOwogICAgICAgICAgfTsKCiAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgc2F2ZUluZm86IGZ1bmN0aW9uIHNhdmVJbmZvKCkgewogICAgICBpZiAodGhpcy5mb3JtSXNWYWxpZCkgewogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmRiLmNvbGxlY3Rpb24oInVzZXJzIikuZG9jKHRoaXMuJGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51aWQpLnVwZGF0ZSh7CiAgICAgICAgICAnbmFtZSc6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyTmFtZScpLnZhbHVlLAogICAgICAgICAgJ2VtYWlsJzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJFbWFpbCcpLnZhbHVlCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy51cGRhdGVkID0gdHJ1ZTsKICAgICAgICB2YXIgcmVkaXJlY3QgPSB0aGlzLiRyb3V0ZXI7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvL3JlZGlyZWN0IHRvIGFjY291bnQKICAgICAgICAgIHJlZGlyZWN0LnB1c2goewogICAgICAgICAgICBwYXRoOiAncXInLAogICAgICAgICAgICBuYW1lOiAnUXInCiAgICAgICAgICB9KTsKICAgICAgICB9LCAzMDAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhbGVydCgn0KTQvtGA0LzQsCDQt9Cw0L/QvtCy0L3QtdC90LAg0L3QtdCy0ZbRgNC90L4hJyk7CiAgICAgIH0KICAgIH0sCiAgICBzaWduT3V0OiBmdW5jdGlvbiBzaWduT3V0KCkgewogICAgICBpZiAoY29uZmlybSgn0JLQuCDQtNGW0LnRgdC90L4g0YXQvtGH0LXRgtC1INCy0LjQudGC0Lgg0Lcg0LTQvtC00LDRgtC60YM/JykpIHsKICAgICAgICB2YXIgcmVmID0gdGhpczsKICAgICAgICByZWYuJGZpcmViYXNlLmF1dGgoKS5zaWduT3V0KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZWYuJHN0b3JlLnN0YXRlLnVzZXIgPSBmYWxzZTsKICAgICAgICAgIHJlZi4kcm91dGVyLnB1c2goewogICAgICAgICAgICBwYXRoOiAnc2lnbnVwJywKICAgICAgICAgICAgbmFtZTogJ1NpZ251cCcsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIGxvZ291dDogMQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["profile.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <v-container>\r\n    <v-layout text-center wrap>\r\n      <v-flex xs12>\r\n         <template>\r\n           <div>\r\n          <h1  class=\"headline\" style=\"color:orange\">Мій профіль</h1> \r\n          <v-btn absolute=\"\" top right small\r\n            id=\"signOutBtn\"\r\n            color=\"success\"\r\n            outlined=\"\"\r\n            class=\"mr-4\"\r\n            @click=\"signOut\"\r\n          >\r\n            <v-icon>mdi-arrow-right</v-icon>\r\n          </v-btn>\r\n          </div>\r\n          <br/>\r\n          <div class=\"text-center\" v-if=\"signedup\">\r\n            <v-alert color=\"green lighten-2\" height=\"40\" style=\"padding-top:7px\">Вітаємо у BeEco!</v-alert>\r\n          </div>\r\n          <div class=\"text-center\" v-if=\"!$store.state.user.email\">\r\n            <v-alert color=\"orange lighten-2\" style=\"padding-top:7px\"><v-icon>mdi-email</v-icon>Вкажіть свій e-mail на випадок зміни номеру телефона</v-alert>\r\n          </div>\r\n          <div class=\"text-center\" v-if=\"avatarUploaded\">\r\n            <v-alert color=\"green lighten-2\" height=\"40\" style=\"padding-top:7px\">Аватар оновлено!</v-alert>\r\n          </div>\r\n          <img id='profileAvatar' v-if=\"$store.state.user.avatar\" v-bind:src=\"$store.state.user.avatar\" width=\"150\" />\r\n          <img id='profileAvatar' v-else src=\"\" width=\"150\" />\r\n          <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\r\n              <v-file-input outlined id=\"avatarUpload\" label=\"Загрузить аватар\" accept=\"image/*\" @change=\"uploadAvatar($event)\"></v-file-input>\r\n              <v-text-field v-model=\"$store.state.user.name\" outlined id=\"userName\" label=\"Имя\" :rules=\"nameRules\" @change=\"validateForm\" required></v-text-field>\r\n              <v-text-field v-model=\"$store.state.user.email\" outlined id=\"userEmail\" label=\"E-mail\" :rules=\"emailRules\" @change=\"validateForm\"></v-text-field>\r\n              <div class=\"text-center\" v-if=\"updated\">\r\n                <v-alert color=\"green lighten-2\" height=\"40\" style=\"padding-top:7px\">Інформацію оновлено!</v-alert>\r\n              </div>\r\n              <v-btn\r\n                id=\"submitForm\"\r\n                :disabled=\"!formIsValid\"\r\n                color=\"success\"\r\n                class=\"mr-4\"\r\n                @click=\"saveInfo\"\r\n              >\r\n                Зберегти\r\n              </v-btn>\r\n            </v-form> \r\n          </template>\r\n      </v-flex>\r\n      </v-layout>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Profile',\r\n  data: () => ({\r\n    signedup:false,\r\n    avatarUploaded:false,\r\n    updated:false,\r\n    formIsValid:false,\r\n    valid:true,\r\n    //profile:{'name':'', 'email':'', 'phone':'', 'avatar':''},\r\n    nameRules: [\r\n        v => !!v || 'Обов`язкове поле'\r\n    ],\r\n    emailRules: [\r\n        v => /.+@.+/.test(v) || 'Невірний e-mail',\r\n    ]\r\n  }),\r\n  mounted(){\r\n    if(typeof(this.$route.params.signedup) != 'undefined'){\r\n      this.signedup = this.$route.params.signedup;\r\n    }\r\n  },\r\n  methods:{\r\n    validateForm(){\r\n      if (this.$refs.form.validate()) {\r\n        this.formIsValid = true;\r\n      } else{\r\n         this.formIsValid = false;\r\n      }\r\n    },\r\n    uploadAvatar(file){\r\n      let store = this.$store;\r\n      let firebase = this.$firebase;\r\n      let ref = this;\r\n      firebase.storage().ref().child('avatars/'+this.$firebase.auth().currentUser.uid).put(file).then(function(snapshot) {\r\n          console.log('Uploaded a blob or file!'+snapshot);\r\n          //get url\r\n          snapshot.ref.getDownloadURL().then(function(url) {\r\n          store.state.db.collection('users').doc(firebase.auth().currentUser.uid).update({'avatar':url});\r\n          var reader = new FileReader();\r\n          reader.onload = function(e) {\r\n            document.getElementById('profileAvatar').src = e.target.result;\r\n            ref.avatarUploaded = true;\r\n            setTimeout(\r\n              function(){\r\n                ref.avatarUploaded = false;\r\n              },3000);\r\n          }\r\n          reader.readAsDataURL(file);\r\n        });\r\n      });\r\n    },\r\n    saveInfo(){\r\n      if(this.formIsValid){\r\n        this.$store.state.db.collection(\"users\").doc(this.$firebase.auth().currentUser.uid).update({'name':document.getElementById('userName').value, 'email':document.getElementById('userEmail').value});\r\n        this.updated=true;\r\n        let redirect = this.$router;\r\n\r\n        setTimeout(\r\n          function(){\r\n            //redirect to account\r\n           redirect.push({path:'qr', name:'Qr'});\r\n          }\r\n          ,3000\r\n        );\r\n      } else {\r\n         alert('Форма заповнена невірно!');\r\n      }\r\n    },\r\n    signOut(){\r\n      if(confirm('Ви дійсно хочете вийти з додатку?')){\r\n        let ref = this;\r\n        ref.$firebase.auth().signOut().then(\r\n          ()=>{\r\n            ref.$store.state.user = false;\r\n            ref.$router.push({path:'signup', name:'Signup', params:{logout:1}});\r\n          }\r\n        );\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n"],"sourceRoot":"src/components"}]}