{"remainingRequest":"C:\\APPS\\beeko\\node_modules\\babel-loader\\lib\\index.js!C:\\APPS\\beeko\\node_modules\\vuetify-loader\\lib\\loader.js!C:\\APPS\\beeko\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\APPS\\beeko\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\APPS\\beeko\\src\\components\\profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\APPS\\beeko\\src\\components\\profile.vue","mtime":1596958446000},{"path":"C:\\APPS\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\APPS\\beeko\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\APPS\\beeko\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1567240334000},{"path":"C:\\APPS\\beeko\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\APPS\\beeko\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQcm9maWxlJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2lnbmVkdXA6IGZhbHNlLAogICAgICBhdmF0YXJVcGxvYWRlZDogZmFsc2UsCiAgICAgIHVwZGF0ZWQ6IGZhbHNlLAogICAgICBmb3JtSXNWYWxpZDogZmFsc2UsCiAgICAgIHZhbGlkOiB0cnVlLAogICAgICAvL3Byb2ZpbGU6eyduYW1lJzonJywgJ2VtYWlsJzonJywgJ3Bob25lJzonJywgJ2F2YXRhcic6Jyd9LAogICAgICBydWxlczogW2Z1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuICEhdiB8fCAn0J7QsdC+0LJg0Y/Qt9C60L7QstC1INC/0L7Qu9C1JzsKICAgICAgfV0sCiAgICAgIGVtYWlsUnVsZXM6IFtmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiAvLitALisvLnRlc3QodikgfHwgJ9Cd0LXQstGW0YDQvdC40LkgZS1tYWlsJzsKICAgICAgfV0KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgaWYgKHR5cGVvZiB0aGlzLiRyb3V0ZS5wYXJhbXMuc2lnbmVkdXAgIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgdGhpcy5zaWduZWR1cCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5zaWduZWR1cDsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHZhbGlkYXRlRm9ybTogZnVuY3Rpb24gdmFsaWRhdGVGb3JtKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICB0aGlzLmZvcm1Jc1ZhbGlkID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm1Jc1ZhbGlkID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICB1cGxvYWRBdmF0YXI6IGZ1bmN0aW9uIHVwbG9hZEF2YXRhcihmaWxlKSB7CiAgICAgIHZhciBzdG9yZSA9IHRoaXMuJHN0b3JlOwogICAgICB2YXIgZmlyZWJhc2UgPSB0aGlzLiRmaXJlYmFzZTsKICAgICAgdmFyIHJlZiA9IHRoaXM7CiAgICAgIGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoKS5jaGlsZCgnYXZhdGFycy8nICsgdGhpcy4kZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZCkucHV0KGZpbGUpLnRoZW4oZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgY29uc29sZS5sb2coJ1VwbG9hZGVkIGEgYmxvYiBvciBmaWxlIScgKyBzbmFwc2hvdCk7IC8vZ2V0IHVybAoKICAgICAgICBzbmFwc2hvdC5yZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgIHN0b3JlLnN0YXRlLmRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51aWQpLnVwZGF0ZSh7CiAgICAgICAgICAgICdhdmF0YXInOiB1cmwKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CgogICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9maWxlQXZhdGFyJykuc3JjID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgICByZWYuYXZhdGFyVXBsb2FkZWQgPSB0cnVlOwogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZWYuYXZhdGFyVXBsb2FkZWQgPSBmYWxzZTsKICAgICAgICAgICAgfSwgMzAwMCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBzYXZlSW5mbzogZnVuY3Rpb24gc2F2ZUluZm8oKSB7CiAgICAgIGlmICh0aGlzLmZvcm1Jc1ZhbGlkKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZGIuY29sbGVjdGlvbigidXNlcnMiKS5kb2ModGhpcy4kZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZCkudXBkYXRlKHsKICAgICAgICAgICduYW1lJzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJOYW1lJykudmFsdWUsCiAgICAgICAgICAnZW1haWwnOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlckVtYWlsJykudmFsdWUsCiAgICAgICAgICAncGhvbmUnOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlclBob25lJykudmFsdWUKICAgICAgICB9KTsKICAgICAgICB0aGlzLnVwZGF0ZWQgPSB0cnVlOwogICAgICAgIHZhciByZWRpcmVjdCA9IHRoaXMuJHJvdXRlcjsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vcmVkaXJlY3QgdG8gYWNjb3VudAogICAgICAgICAgcmVkaXJlY3QucHVzaCh7CiAgICAgICAgICAgIHBhdGg6ICdxcicsCiAgICAgICAgICAgIG5hbWU6ICdRcicKICAgICAgICAgIH0pOwogICAgICAgIH0sIDMwMDApOwogICAgICB9IGVsc2UgewogICAgICAgIGFsZXJ0KCfQpNC+0YDQvNCwINC30LDQv9C+0LLQvdC10L3QsCDQvdC10LLRltGA0L3QviEnKTsKICAgICAgfQogICAgfSwKICAgIHNpZ25PdXQ6IGZ1bmN0aW9uIHNpZ25PdXQoKSB7CiAgICAgIGlmIChjb25maXJtKCfQktC4INC00ZbQudGB0L3QviDRhdC+0YfQtdGC0LUg0LLQuNC50YLQuCDQtyDQtNC+0LTQsNGC0LrRgz8nKSkgewogICAgICAgIHZhciByZWYgPSB0aGlzOwogICAgICAgIHJlZi4kZmlyZWJhc2UuYXV0aCgpLnNpZ25PdXQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJlZi4kc3RvcmUuc3RhdGUudXNlciA9IGZhbHNlOwogICAgICAgICAgcmVmLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6ICdzaWdudXAnLAogICAgICAgICAgICBuYW1lOiAnU2lnbnVwJywKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgbG9nb3V0OiAxCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["profile.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <v-container>\r\n    <v-layout text-center wrap>\r\n      <v-flex xs12>\r\n         <template>\r\n           <div>\r\n          <h1  class=\"headline\" style=\"color:orange\">Мій профіль</h1> \r\n          <v-btn absolute=\"\" top right small\r\n            id=\"signOutBtn\"\r\n            color=\"success\"\r\n            outlined=\"\"\r\n            class=\"mr-4\"\r\n            @click=\"signOut\"\r\n          >\r\n            <v-icon>mdi-arrow-right</v-icon>\r\n          </v-btn>\r\n          </div>\r\n          <br/>\r\n          <div class=\"text-center\" v-if=\"signedup\">\r\n            <v-alert color=\"green lighten-2\" height=\"40\" style=\"padding-top:7px\">Вітаємо у BeEco!</v-alert>\r\n          </div>\r\n          <div class=\"text-center\" v-if=\"!$store.state.user.email\">\r\n            <v-alert color=\"orange lighten-2\" style=\"padding-top:7px\"><v-icon>mdi-email</v-icon>Вкажіть свій e-mail на випадок зміни номеру телефона</v-alert>\r\n          </div>\r\n          <div class=\"text-center\" v-if=\"avatarUploaded\">\r\n            <v-alert color=\"green lighten-2\" height=\"40\" style=\"padding-top:7px\">Аватар оновлено!</v-alert>\r\n          </div>\r\n          <img id='profileAvatar' v-if=\"$store.state.user.avatar\" v-bind:src=\"$store.state.user.avatar\" width=\"150\" />\r\n          <img id='profileAvatar' v-else src=\"\" width=\"150\" />\r\n          <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\r\n              <v-file-input outlined id=\"avatarUpload\" label=\"Загрузить аватар\" accept=\"image/*\" @change=\"uploadAvatar($event)\"></v-file-input>\r\n              <v-text-field v-model=\"$store.state.user.name\" outlined id=\"userName\" label=\"Имя\" :rules=\"rules\" @change=\"validateForm\" required></v-text-field>\r\n              <v-text-field v-model=\"$store.state.user.phone\" outlined id=\"userPhone\" type=\"number\" label=\"Телефон\" thumb-label :rules=\"rules\" @change=\"validateForm\" required></v-text-field>\r\n              <v-text-field v-model=\"$store.state.user.email\" outlined id=\"userEmail\" label=\"E-mail\" :rules=\"emailRules\" @change=\"validateForm\"></v-text-field>\r\n              <div class=\"text-center\" v-if=\"updated\">\r\n                <v-alert color=\"green lighten-2\" height=\"40\" style=\"padding-top:7px\">Інформацію оновлено!</v-alert>\r\n              </div>\r\n              <v-btn\r\n                id=\"submitForm\"\r\n                :disabled=\"!formIsValid\"\r\n                color=\"success\"\r\n                class=\"mr-4\"\r\n                @click=\"saveInfo\"\r\n              >\r\n                Зберегти\r\n              </v-btn>\r\n            </v-form> \r\n          </template>\r\n      </v-flex>\r\n      </v-layout>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Profile',\r\n  data: () => ({\r\n    signedup:false,\r\n    avatarUploaded:false,\r\n    updated:false,\r\n    formIsValid:false,\r\n    valid:true,\r\n    //profile:{'name':'', 'email':'', 'phone':'', 'avatar':''},\r\n    rules: [\r\n        v => !!v || 'Обов`язкове поле'\r\n    ],\r\n    emailRules: [\r\n        v => /.+@.+/.test(v) || 'Невірний e-mail',\r\n    ]\r\n  }),\r\n  mounted(){\r\n    if(typeof(this.$route.params.signedup) != 'undefined'){\r\n      this.signedup = this.$route.params.signedup;\r\n    }\r\n  },\r\n  methods:{\r\n    validateForm(){\r\n      if (this.$refs.form.validate()) {\r\n        this.formIsValid = true;\r\n      } else{\r\n         this.formIsValid = false;\r\n      }\r\n    },\r\n    uploadAvatar(file){\r\n      let store = this.$store;\r\n      let firebase = this.$firebase;\r\n      let ref = this;\r\n      firebase.storage().ref().child('avatars/'+this.$firebase.auth().currentUser.uid).put(file).then(function(snapshot) {\r\n          console.log('Uploaded a blob or file!'+snapshot);\r\n          //get url\r\n          snapshot.ref.getDownloadURL().then(function(url) {\r\n          store.state.db.collection('users').doc(firebase.auth().currentUser.uid).update({'avatar':url});\r\n          var reader = new FileReader();\r\n          reader.onload = function(e) {\r\n            document.getElementById('profileAvatar').src = e.target.result;\r\n            ref.avatarUploaded = true;\r\n            setTimeout(\r\n              function(){\r\n                ref.avatarUploaded = false;\r\n              },3000);\r\n          }\r\n          reader.readAsDataURL(file);\r\n        });\r\n      });\r\n    },\r\n    saveInfo(){\r\n      if(this.formIsValid){\r\n        this.$store.state.db.collection(\"users\").doc(this.$firebase.auth().currentUser.uid).update({'name':document.getElementById('userName').value, 'email':document.getElementById('userEmail').value, 'phone':document.getElementById('userPhone').value});\r\n        this.updated=true;\r\n        let redirect = this.$router;\r\n\r\n        setTimeout(\r\n          function(){\r\n            //redirect to account\r\n           redirect.push({path:'qr', name:'Qr'});\r\n          }\r\n          ,3000\r\n        );\r\n      } else {\r\n         alert('Форма заповнена невірно!');\r\n      }\r\n    },\r\n    signOut(){\r\n      if(confirm('Ви дійсно хочете вийти з додатку?')){\r\n        let ref = this;\r\n        ref.$firebase.auth().signOut().then(\r\n          ()=>{\r\n            ref.$store.state.user = false;\r\n            ref.$router.push({path:'signup', name:'Signup', params:{logout:1}});\r\n          }\r\n        );\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n"],"sourceRoot":"src/components"}]}